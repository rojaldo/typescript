<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<meta name="author" content="Daniel Rojo Pérez">
<title>Temario — Curso de TypeScript (20 horas)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Temario — Curso de TypeScript (20 horas)</h1>
<div class="details">
<span id="author" class="author">Daniel Rojo Pérez</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2026-02-15</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_módulo_1_introducción_y_contexto_1h">1. Módulo 1 — Introducción y contexto (1h)</a>
<ul class="sectlevel2">
<li><a href="#_historia_y_adopción_de_typescript">1.1. Historia y adopción de TypeScript</a></li>
<li><a href="#_qué_es_typescript_y_por_qué_usarlo">1.2. ¿Qué es TypeScript y por qué usarlo?</a>
<ul class="sectlevel3">
<li><a href="#_tipado_gradual_y_adopción_incremental">1.2.1. Tipado gradual y adopción incremental</a></li>
</ul>
</li>
<li><a href="#_beneficios_prácticos_qué_notarás_día_a_día">1.3. Beneficios prácticos (qué notarás día a día)</a></li>
<li><a href="#_casos_de_uso_típicos">1.4. Casos de uso típicos</a></li>
<li><a href="#_instalación_y_primer_proyecto_rápido_y_reproducible">1.5. Instalación y primer proyecto (rápido y reproducible)</a>
<ul class="sectlevel3">
<li><a href="#_instalación_recomendada_local">1.5.1. Instalación recomendada (local)</a></li>
<li><a href="#_scripts_útiles_en_package_json">1.5.2. Scripts útiles en <code>package.json</code></a></li>
</ul>
</li>
<li><a href="#_primer_ejemplo_hola_mundo_y_flujo_básico">1.6. Primer ejemplo: "Hola Mundo" y flujo básico</a></li>
<li><a href="#_tsconfig_json_opciones_que_importan">1.7. <code>tsconfig.json</code> — opciones que importan</a></li>
<li><a href="#_flujo_de_trabajo_recomendado">1.8. Flujo de trabajo recomendado</a></li>
<li><a href="#_errores_comunes_y_soluciones_rápidas">1.9. Errores comunes y soluciones rápidas</a>
<ul class="sectlevel3">
<li><a href="#_import_alias_no_resuelto">1.9.1. Import alias no resuelto</a></li>
<li><a href="#_tipos_faltantes_de_dependencias_js">1.9.2. Tipos faltantes de dependencias JS</a></li>
<li><a href="#_tsserver_lento">1.9.3. <code>tsserver</code> lento</a></li>
</ul>
</li>
<li><a href="#_ejercicios_prácticos_para_clase_o_tarea">1.10. Ejercicios prácticos (para clase o tarea)</a></li>
<li><a href="#_lecturas_y_recursos_recomendados">1.11. Lecturas y recursos recomendados</a></li>
</ul>
</li>
<li><a href="#_módulo_2_configuración_y_toolchain_1h">2. Módulo 2 — Configuración y toolchain (1h)</a>
<ul class="sectlevel2">
<li><a href="#_tsconfig_json_opciones_esenciales">2.1. <code>tsconfig.json</code> — opciones esenciales</a>
<ul class="sectlevel3">
<li><a href="#_target_module_lib">2.1.1. target / module / lib</a></li>
<li><a href="#_strict_flags_y_control_de_nulabilidad">2.1.2. strict flags y control de nulabilidad</a></li>
<li><a href="#_declaration_sourcemap_y_outdir">2.1.3. declaration, sourceMap y outDir</a></li>
<li><a href="#_incremental_composite_y_tsbuildinfofile">2.1.4. incremental, composite y tsBuildInfoFile</a></li>
</ul>
</li>
<li><a href="#_ejemplo_tsconfig_json_comentado">2.2. Ejemplo <code>tsconfig.json</code> comentado</a>
<ul class="sectlevel3">
<li><a href="#_tsconfig_json_explicación_campo_a_campo">2.2.1. <code>tsconfig.json</code> — explicación campo a campo</a></li>
<li><a href="#_ejemplo_mínimo_recomendado_para_aplicaciones">2.2.2. Ejemplo mínimo recomendado para aplicaciones</a></li>
</ul>
</li>
<li><a href="#_paths_y_resolución_de_módulos_baseurl_paths">2.3. Paths y resolución de módulos (baseUrl / paths)</a></li>
<li><a href="#_project_references_y_monorepos">2.4. Project references y monorepos</a></li>
<li><a href="#_integración_con_herramientas_y_flujo_de_trabajo">2.5. Integración con herramientas y flujo de trabajo</a>
<ul class="sectlevel3">
<li><a href="#_ts_node_ts_node_dev">2.5.1. ts-node / ts-node-dev</a></li>
<li><a href="#_bundlers_modernos_esbuild_swc_vite">2.5.2. Bundlers modernos (esbuild / SWC / Vite)</a></li>
<li><a href="#_webpack_rollup">2.5.3. Webpack / Rollup</a></li>
</ul>
</li>
<li><a href="#_scripts_npm_recomendados">2.6. Scripts npm recomendados</a></li>
<li><a href="#_source_maps_y_archivos_de_declaración_para_librerías">2.7. Source maps y archivos de declaración para librerías</a></li>
<li><a href="#_diagnóstico_y_comandos_útiles">2.8. Diagnóstico y comandos útiles</a></li>
<li><a href="#_buenas_prácticas_y_antipatterns">2.9. Buenas prácticas y antipatterns</a></li>
<li><a href="#_sección_práctica_ejercicios">2.10. Sección práctica (ejercicios)</a></li>
</ul>
</li>
<li><a href="#_módulo_3_tipos_básicos_y_anotaciones_2h">3. Módulo 3 — Tipos básicos y anotaciones (2h)</a>
<ul class="sectlevel2">
<li><a href="#_tipos_primitivos_explicación_y_ejemplos">3.1. Tipos primitivos: explicación y ejemplos</a>
<ul class="sectlevel3">
<li><a href="#_ejemplos_básicos">3.1.1. Ejemplos básicos</a></li>
<li><a href="#_literal_types_y_usos_prácticos">3.1.2. Literal types y usos prácticos</a></li>
</ul>
</li>
<li><a href="#_colecciones_y_estructuras">3.2. Colecciones y estructuras</a>
<ul class="sectlevel3">
<li><a href="#_arrays_y_readonly">3.2.1. Arrays y <code>readonly</code></a></li>
<li><a href="#_callbacks_tipadas_y_firma_de_los_métodos">3.2.2. Callbacks tipadas y firma de los métodos</a></li>
</ul>
</li>
<li><a href="#_inmutabilidad_y_readonlyarray_as_const">3.3. Inmutabilidad y <code>ReadonlyArray</code> / <code>as const</code></a></li>
<li><a href="#_buenas_prácticas_y_rendimiento">3.4. Buenas prácticas y rendimiento</a></li>
<li><a href="#_errores_comunes">3.5. Errores comunes</a></li>
<li><a href="#_ejercicios_rápidos">3.6. Ejercicios rápidos</a>
<ul class="sectlevel3">
<li><a href="#_tuplas_tuples">3.6.1. Tuplas (tuples)</a></li>
<li><a href="#_enums_vs_union_de_literales">3.6.2. Enums vs union de literales</a></li>
</ul>
</li>
<li><a href="#_null_undefined_y_control_de_nulabilidad">3.7. Null / Undefined y control de nulabilidad</a>
<ul class="sectlevel3">
<li><a href="#_opcionales_y_operadores">3.7.1. Opcionales y operadores</a></li>
</ul>
</li>
<li><a href="#_inferencia_de_tipos_y_cuándo_anotar">3.8. Inferencia de tipos y cuándo anotar</a>
<ul class="sectlevel3">
<li><a href="#_declaración_implícita_vs_explícita_variables_primitivas">3.8.1. Declaración implícita vs explícita (variables primitivas)</a></li>
<li><a href="#_const_vs_let_literal_widening">3.8.2. Const vs let — literal widening</a></li>
<li><a href="#_cuándo_usar_implícita_y_cuándo_explícita">3.8.3. ¿Cuándo usar implícita y cuándo explícita?</a></li>
<li><a href="#_buenas_prácticas_rápidas">3.8.4. Buenas prácticas rápidas</a></li>
</ul>
</li>
<li><a href="#_type_assertions_as_y_unknown">3.9. Type assertions (<code>as</code>) y <code>unknown</code></a></li>
<li><a href="#_any_vs_unknown_comparativa_rápida">3.10. <code>any</code> vs <code>unknown</code> (comparativa rápida)</a></li>
<li><a href="#_type_guards_y_narrowing_estrechamiento_de_tipos">3.11. Type guards y narrowing (estrechamiento de tipos)</a></li>
<li><a href="#_discriminated_unions_uniones_discriminadas">3.12. Discriminated unions (uniones discriminadas)</a></li>
<li><a href="#_buenas_prácticas_reglas_rápidas">3.13. Buenas prácticas (reglas rápidas)</a></li>
<li><a href="#_ejemplos_y_ejercicios_propuestos">3.14. Ejemplos y ejercicios propuestos</a>
<ul class="sectlevel3">
<li><a href="#_ejercicio_1_modela_user_y_valida">3.14.1. Ejercicio 1 — Modela <code>User</code> y valida</a></li>
<li><a href="#_ejercicio_2_tuplas_y_utilidades">3.14.2. Ejercicio 2 — Tuplas y utilidades</a></li>
<li><a href="#_ejercicio_3_null_y_opcionales">3.14.3. Ejercicio 3 — Null y opcionales</a></li>
<li><a href="#_ejercicio_4_práctica_de_narrowing">3.14.4. Ejercicio 4 — Práctica de narrowing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_módulo_4_funciones_y_tipado_de_api_2h">4. Módulo 4 — Funciones y tipado de API (2h)</a>
<ul class="sectlevel2">
<li><a href="#_firmas_de_función_y_sobrecargas_explicación">4.1. Firmas de función y sobrecargas (explicación)</a>
<ul class="sectlevel3">
<li><a href="#_declaración_de_tipos_para_funciones">4.1.1. Declaración de tipos para funciones</a></li>
<li><a href="#_overloads_vs_unions">4.1.2. Overloads vs unions</a></li>
</ul>
</li>
<li><a href="#_parámetros_valores_por_defecto_y_this_contexto">4.2. Parámetros, valores por defecto y <code>this</code> (contexto)</a>
<ul class="sectlevel3">
<li><a href="#_parámetros_opcionales_rest_y_defaults">4.2.1. Parámetros opcionales, rest y defaults</a></li>
<li><a href="#_tipado_de_this">4.2.2. Tipado de <code>this</code></a></li>
</ul>
</li>
<li><a href="#_utilidades_útiles_para_funciones">4.3. Utilidades útiles para funciones</a></li>
<li><a href="#_apis_asíncronas_y_manejo_de_errores_tipado">4.4. APIs asíncronas y manejo de errores tipado</a>
<ul class="sectlevel3">
<li><a href="#_tipar_fetchrequest_con_generics">4.4.1. Tipar <code>fetch</code>/request con generics</a></li>
<li><a href="#_patrón_result_alternativa_a_excepciones">4.4.2. Patrón Result (alternativa a excepciones)</a></li>
</ul>
</li>
<li><a href="#_patrones_y_diseño_de_apis_tipadas">4.5. Patrones y diseño de APIs tipadas</a></li>
<li><a href="#_buenas_prácticas_para_apis_de_función">4.6. Buenas prácticas para APIs de función</a></li>
<li><a href="#_ejercicios_prácticos_y_taller_clase">4.7. Ejercicios prácticos y taller (clase)</a></li>
</ul>
</li>
<li><a href="#_módulo_5_interfaces_y_tipos_compuestos_2h">5. Módulo 5 — Interfaces y tipos compuestos (2h)</a>
<ul class="sectlevel2">
<li><a href="#_interface_vs_type_reglas_prácticas">5.1. <code>interface</code> vs <code>type</code> — reglas prácticas</a></li>
<li><a href="#_extensión_y_reutilización">5.2. Extensión y reutilización</a></li>
<li><a href="#_composición_de_tipos_unions_y_intersections">5.3. Composición de tipos: unions y intersections</a></li>
<li><a href="#_index_signatures_y_record_objetos_dinámicos">5.4. Index signatures y <code>Record</code> (objetos dinámicos)</a></li>
<li><a href="#_mapped_types_y_key_remapping">5.5. Mapped types y key remapping</a></li>
<li><a href="#_utility_types_en_la_práctica">5.6. Utility types en la práctica</a></li>
<li><a href="#_patrones_de_modelado_dtos_entities_y_value_objects">5.7. Patrones de modelado: DTOs, Entities y Value Objects</a></li>
<li><a href="#_tipos_híbridos_y_firmas_de_llamada">5.8. Tipos híbridos y firmas de llamada</a></li>
<li><a href="#_declaration_merging_y_module_augmentation_cuándo_usar">5.9. Declaration merging y module augmentation (cuándo usar)</a></li>
<li><a href="#_buenas_prácticas_y_anti_patrones">5.10. Buenas prácticas y anti-patrones</a></li>
<li><a href="#_ejercicios_prácticos_clase_tarea">5.11. Ejercicios prácticos (clase / tarea)</a></li>
</ul>
</li>
<li><a href="#_módulo_6_clases_y_poo_en_typescript_2h">6. Módulo 6 — Clases y POO en TypeScript (2h)</a>
<ul class="sectlevel2">
<li><a href="#_introducción_práctica">6.1. Introducción práctica</a></li>
<li><a href="#_construyendo_clases_paso_a_paso_sintaxis_y_variantes">6.2. Construyendo clases — paso a paso (sintaxis y variantes)</a></li>
<li><a href="#_interfaces_como_contrato_de_clase_shape_y_implements">6.3. Interfaces como contrato de clase (shape y <code>implements</code>)</a></li>
<li><a href="#_herencia_abstracción_y_polimorfismo_práctica_segura">6.4. Herencia, abstracción y polimorfismo (práctica segura)</a></li>
<li><a href="#_métodos_y_propiedades_estáticas_cuándo_y_cómo_usarlos">6.5. Métodos y propiedades estáticas — cuándo y cómo usarlos</a></li>
<li><a href="#_uso_práctico_patrones_con_clases_repositorio_value_object_factory">6.6. Uso práctico: patrones con clases (repositorio, value object, factory)</a></li>
<li><a href="#_errores_comunes_y_antipatterns_con_clases">6.7. Errores comunes y antipatterns con clases</a></li>
<li><a href="#_ejercicios_didácticos_claro_y_aplicable">6.8. Ejercicios didácticos (claro y aplicable)</a></li>
</ul>
</li>
<li><a href="#_módulo_7_genéricos_y_utilidades_2h">7. Módulo 7 — Genéricos y utilidades (2h)</a>
<ul class="sectlevel2">
<li><a href="#_qué_son_los_genéricos_intención_pedagógica">7.1. ¿Qué son los genéricos? (intención pedagógica)</a></li>
<li><a href="#_genéricos_básicos_sintaxis_y_ejemplos">7.2. Genéricos básicos: sintaxis y ejemplos</a>
<ul class="sectlevel3">
<li><a href="#_constraints_t_extends_u_y_keyof">7.2.1. Constraints (<code>T extends U</code>) y <code>keyof</code></a></li>
<li><a href="#_parámetros_por_defecto_y_genéricos_condicionales">7.2.2. Parámetros por defecto y genéricos condicionales</a></li>
</ul>
</li>
<li><a href="#_patrones_prácticos_con_genéricos">7.3. Patrones prácticos con genéricos</a></li>
<li><a href="#_utility_types_built_in_usos_prácticos">7.4. Utility types (built-in) — usos prácticos</a></li>
<li><a href="#_conditional_types_y_infer_explicación_y_ejemplos">7.5. Conditional types y <code>infer</code> — explicación y ejemplos</a>
<ul class="sectlevel3">
<li><a href="#_deepreadonly_ejemplo_recursivo">7.5.1. DeepReadonly (ejemplo recursivo)</a></li>
</ul>
</li>
<li><a href="#_ejemplos_avanzados_de_tipos_utilitarios">7.6. Ejemplos avanzados de tipos utilitarios</a></li>
<li><a href="#_aplicaciones_prácticas_helpers_y_validadores">7.7. Aplicaciones prácticas (helpers y validadores)</a></li>
<li><a href="#_buenas_prácticas_con_genéricos">7.8. Buenas prácticas con genéricos</a></li>
<li><a href="#_ejercicios_propuestos_clase_tarea">7.9. Ejercicios propuestos (clase / tarea)</a></li>
</ul>
</li>
<li><a href="#_módulo_8_tipos_avanzados_y_patterns_2h">8. Módulo 8 — Tipos avanzados y patterns (2h)</a>
<ul class="sectlevel2">
<li><a href="#_discriminated_unions_y_type_guards_conceptos_y_práctica">8.1. Discriminated unions y type guards (conceptos y práctica)</a>
<ul class="sectlevel3">
<li><a href="#_user_defined_type_guards_y_asserts">8.1.1. User-defined type guards y <code>asserts</code></a></li>
</ul>
</li>
<li><a href="#_mapped_conditional_template_literal_types_potencia_tipada">8.2. Mapped / Conditional / Template literal types (potencia tipada)</a></li>
<li><a href="#_branded_nominal_typing_cuando_lo_necesitas">8.3. Branded / Nominal typing (cuando lo necesitas)</a></li>
<li><a href="#_metaprogramación_de_tipos_técnicas_comunes">8.4. Metaprogramación de tipos (técnicas comunes)</a></li>
<li><a href="#_buenas_prácticas_y_advertencias">8.5. Buenas prácticas y advertencias</a></li>
<li><a href="#_ejercicios_avanzados_clase_tarea">8.6. Ejercicios avanzados (clase / tarea)</a>
<ul class="sectlevel3">
<li><a href="#_modelar_sistema_de_eventos_y_handlers_tipados">8.6.1. modelar sistema de eventos y handlers tipados</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_módulo_9_módulos_declaration_files_y_resolución_1_5h">9. Módulo 9 — Módulos, declaration files y resolución (1.5h)</a>
<ul class="sectlevel2">
<li><a href="#_sistemas_de_módulos_y_empaquetado_esm_vs_commonjs">9.1. Sistemas de módulos y empaquetado (ESM vs CommonJS)</a></li>
<li><a href="#_declaration_files_d_ts_y_packaging_de_tipos">9.2. Declaration files (<code>.d.ts</code>) y packaging de tipos</a></li>
<li><a href="#_ejemplo_mínimo_de_d_ts_para_una_librería_js">9.3. Ejemplo mínimo de <code>.d.ts</code> para una librería JS</a></li>
<li><a href="#_ambient_declarations_y_module_augmentation">9.4. Ambient declarations y module augmentation</a></li>
<li><a href="#_path_mapping_y_resolución_práctica_baseurl_paths">9.5. Path mapping y resolución práctica (baseUrl / paths)</a></li>
<li><a href="#_publicar_paquetes_con_tipos_checklist">9.6. Publicar paquetes con tipos (checklist)</a></li>
<li><a href="#_resolución_de_problemas_comunes_y_comandos_útiles">9.7. Resolución de problemas comunes y comandos útiles</a></li>
<li><a href="#_buenas_prácticas_publicación_y_compatibilidad">9.8. Buenas prácticas (publicación y compatibilidad)</a></li>
<li><a href="#_ejercicios_prácticos_clase_tarea_2">9.9. Ejercicios prácticos (clase / tarea)</a></li>
</ul>
</li>
<li><a href="#_módulo_10_tooling_linting_y_testing_1_5h">10. Módulo 10 — Tooling, linting y testing (1.5h)</a>
<ul class="sectlevel2">
<li><a href="#_eslint_y_calidad_de_código">10.1. ESLint y calidad de código</a>
<ul class="sectlevel3">
<li><a href="#_typescript_eslint_reglas_esenciales_y_configuración">10.1.1. <code>@typescript-eslint</code>, reglas esenciales y configuración</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_módulo_10_tooling_linting_y_testing_1_5h_2">11. Módulo 10 — Tooling, linting y testing (1.5h)</a>
<ul class="sectlevel2">
<li><a href="#_eslint_y_calidad_de_código_2">11.1. ESLint y calidad de código</a>
<ul class="sectlevel3">
<li><a href="#_configuración_mínima_ejemplo">11.1.1. Configuración mínima (ejemplo)</a></li>
<li><a href="#_reglas_recomendadas_a_activar">11.1.2. Reglas recomendadas a activar</a></li>
<li><a href="#_integración_prettier_lint_staged">11.1.3. Integración Prettier + lint-staged</a></li>
</ul>
</li>
<li><a href="#_testing_tipado_qué_por_qué_y_cómo">11.2. Testing tipado (qué, por qué y cómo)</a>
<ul class="sectlevel3">
<li><a href="#_vitest_configuración_y_ejemplo">11.2.1. Vitest — configuración y ejemplo</a></li>
<li><a href="#_jest_ts_jest_cuando_usarlo">11.2.2. Jest + ts-jest (cuando usarlo)</a></li>
</ul>
</li>
<li><a href="#_estrategias_de_mocking_y_pruebas_unitarias_tipadas">11.3. Estrategias de mocking y pruebas unitarias tipadas</a></li>
<li><a href="#_bundlers_builds_y_source_maps_práctico">11.4. Bundlers, builds y source maps (práctico)</a>
<ul class="sectlevel3">
<li><a href="#_source_maps_y_debugging">11.4.1. Source maps y debugging</a></li>
</ul>
</li>
<li><a href="#_cicd_y_type_check_en_pipelines_recomendaciones">11.5. CI/CD y type-check en pipelines (recomendaciones)</a>
<ul class="sectlevel3">
<li><a href="#_ejemplo_github_actions_esqueleto">11.5.1. Ejemplo GitHub Actions (esqueleto)</a></li>
</ul>
</li>
<li><a href="#_scripts_recomendados_en_package_json">11.6. Scripts recomendados en <code>package.json</code></a></li>
<li><a href="#_diagnóstico_y_comandos_útiles_2">11.7. Diagnóstico y comandos útiles</a></li>
<li><a href="#_rendimiento_y_caching">11.8. Rendimiento y caching</a></li>
<li><a href="#_buenas_prácticas_y_antipatterns_2">11.9. Buenas prácticas y antipatterns</a></li>
<li><a href="#_ejercicios_prácticos_clase_tarea_3">11.10. Ejercicios prácticos (clase / tarea)</a></li>
</ul>
</li>
<li><a href="#_módulo_11_integración_práctica_frontend_y_backend_1_5h">12. Módulo 11 — Integración práctica: Frontend y Backend (1.5h)</a>
<ul class="sectlevel2">
<li><a href="#_contexto_práctico">12.1. Contexto práctico</a></li>
<li><a href="#_react_componentes_hooks_y_patterns_tipados">12.2. React: componentes, hooks y patterns tipados</a>
<ul class="sectlevel3">
<li><a href="#_props_y_componentes_funcionales">12.2.1. Props y componentes funcionales</a></li>
<li><a href="#_usestate_usereducer_con_genéricos">12.2.2. useState / useReducer con genéricos</a></li>
<li><a href="#_refs_forwardref_y_eventos">12.2.3. Refs, forwardRef y eventos</a></li>
<li><a href="#_hooks_personalizados_para_llamadas_tipadas">12.2.4. Hooks personalizados para llamadas tipadas</a></li>
</ul>
</li>
<li><a href="#_backend_tipado_validación_y_errores">12.3. Backend: tipado, validación y errores</a>
<ul class="sectlevel3">
<li><a href="#_dtos_y_validación_en_runtime_zod">12.3.1. DTOs y validación en runtime (zod)</a></li>
<li><a href="#_ruta_express_tipada_requestresponse_generics">12.3.2. Ruta Express tipada (Request/Response generics)</a></li>
<li><a href="#_manejo_de_errores_y_middlewares_tipados">12.3.3. Manejo de errores y middlewares tipados</a></li>
</ul>
</li>
<li><a href="#_compartir_tipos_y_contratos">12.4. Compartir tipos y contratos</a>
<ul class="sectlevel3">
<li><a href="#_estrategias_de_compartición">12.4.1. Estrategias de compartición</a></li>
<li><a href="#_openapi_types_comando_práctico">12.4.2. OpenAPI → types (comando práctico)</a></li>
<li><a href="#_versionado_y_compatibilidad">12.4.3. Versionado y compatibilidad</a></li>
</ul>
</li>
<li><a href="#_buenas_prácticas_rápidas_2">12.5. Buenas prácticas rápidas</a></li>
<li><a href="#_ejercicios_prácticos_clase_tarea_4">12.6. Ejercicios prácticos (clase / tarea)</a></li>
</ul>
</li>
<li><a href="#_módulo_12_proyecto_final_buenas_prácticas_y_migración_incremental_1_5h">13. Módulo 12 — Proyecto final, buenas prácticas y migración incremental (1.5h)</a>
<ul class="sectlevel2">
<li><a href="#_contexto_y_propósito">13.1. Contexto y propósito</a></li>
<li><a href="#_migración_desde_javascript_estrategia_práctica">13.2. Migración desde JavaScript (estrategia práctica)</a>
<ul class="sectlevel3">
<li><a href="#_estrategia_por_fases_recomendado">13.2.1. Estrategia por fases (recomendado)</a></li>
<li><a href="#_configuración_práctica_para_migración_incremental">13.2.2. Configuración práctica para migración incremental</a></li>
<li><a href="#_ejemplo_migrar_un_fichero_pequeño">13.2.3. Ejemplo: migrar un fichero pequeño</a></li>
<li><a href="#_herramientas_y_ayudas">13.2.4. Herramientas y ayudas</a></li>
</ul>
</li>
<li><a href="#_estrategias_para_repos_grandes_y_monorepos">13.3. Estrategias para repos grandes y monorepos</a></li>
<li><a href="#_buenas_prácticas_y_arquitectura_tipada">13.4. Buenas prácticas y arquitectura tipada</a>
<ul class="sectlevel3">
<li><a href="#_boundaries_y_separación_de_capas">13.4.1. Boundaries y separación de capas</a></li>
<li><a href="#_dto_entity_transformaciones_explícitas">13.4.2. DTO → Entity (transformaciones explícitas)</a></li>
<li><a href="#_validación_runtime_vs_compile_time">13.4.3. Validación runtime vs compile-time</a></li>
</ul>
</li>
<li><a href="#_performance_y_optimización_de_compilación">13.5. Performance y optimización de compilación</a></li>
<li><a href="#_calidad_del_código_y_prácticas_de_entrega">13.6. Calidad del código y prácticas de entrega</a></li>
<li><a href="#_proyecto_final_entregables_checklist">13.7. Proyecto final — entregables (checklist)</a></li>
<li><a href="#_criterios_de_entrega_y_rúbrica_sugerida">13.8. Criterios de entrega y rúbrica (sugerida)</a></li>
<li><a href="#_ejercicios_prácticos_clase_tarea_5">13.9. Ejercicios prácticos (clase / tarea)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_módulo_1_introducción_y_contexto_1h">1. Módulo 1 — Introducción y contexto (1h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_historia_y_adopción_de_typescript">1.1. Historia y adopción de TypeScript</h3>
<div class="paragraph">
<p>TypeScript nació en Microsoft como evolución del ecosistema JavaScript para ofrecer comprobación estática de tipos sin romper la compatibilidad con código JS existente. En los últimos años se ha consolidado como estándar en equipos que necesitan escalabilidad, refactorizaciones seguras y mejor tooling (editor/autocompletion, navegación de código, refactors).</p>
</div>
</div>
<div class="sect2">
<h3 id="_qué_es_typescript_y_por_qué_usarlo">1.2. ¿Qué es TypeScript y por qué usarlo?</h3>
<div class="paragraph">
<p>TypeScript es un <strong>superset</strong> de JavaScript que añade anotaciones de tipo y un sistema de tipos estático opcional. No cambia la semántica de JavaScript en tiempo de ejecución: los tipos existen en tiempo de compilación para ayudar a prevenir errores y documentar contratos.</p>
</div>
<div class="sect3">
<h4 id="_tipado_gradual_y_adopción_incremental">1.2.1. Tipado gradual y adopción incremental</h4>
<div class="ulist">
<ul>
<li>
<p>Puedes empezar por añadir tipos a unos pocos archivos (<code>.ts</code>) y mantener el resto en JavaScript (<code>.js</code>).</p>
</li>
<li>
<p>Bandera útil: <code>--allowJs</code> para proyectos mixtos y <code>--checkJs</code> para validar archivos <code>.js</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_beneficios_prácticos_qué_notarás_día_a_día">1.3. Beneficios prácticos (qué notarás día a día)</h3>
<div class="ulist">
<ul>
<li>
<p>Detección temprana de errores de interfaz y API.</p>
</li>
<li>
<p>Refactorizaciones más seguras y autocompletado preciso en el editor.</p>
</li>
<li>
<p>Mejora en la documentación implícita del código (los tipos explican contratos).</p>
</li>
<li>
<p>Facilita compartir tipos entre backend y frontend (monorepo, paquetes de tipos).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_casos_de_uso_típicos">1.4. Casos de uso típicos</h3>
<div class="ulist">
<ul>
<li>
<p>Librerías públicas donde los <code>.d.ts</code> facilitan adopción.</p>
</li>
<li>
<p>Aplicaciones frontend (React, Vue) para mejorar mantenibilidad.</p>
</li>
<li>
<p>Backend en Node.js con tipado de endpoints y DTOs.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instalación_y_primer_proyecto_rápido_y_reproducible">1.5. Instalación y primer proyecto (rápido y reproducible)</h3>
<div class="sect3">
<h4 id="_instalación_recomendada_local">1.5.1. Instalación recomendada (local)</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">npm init -y
npm install --save-dev typescript
npx tsc --version</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scripts_útiles_en_package_json">1.5.2. Scripts útiles en <code>package.json</code></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -p ."</span><span class="p">,</span><span class="w"> </span><span class="nl">"type-check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc --noEmit"</span><span class="p">,</span><span class="w"> </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vite"</span><span class="p">}}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_primer_ejemplo_hola_mundo_y_flujo_básico">1.6. Primer ejemplo: "Hola Mundo" y flujo básico</h3>
<div class="paragraph">
<p>Contexto: ejemplo mínimo de aplicación con función exportada y uso local — útil para mostrar anotaciones, export y ejecución tras compilar.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// src/index.ts</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nf">greet</span><span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">`Hola, </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">!`</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// uso local</span>
<span class="kd">const</span> <span class="nx">saludo</span> <span class="o">=</span> <span class="nf">greet</span><span class="p">(</span><span class="dl">'</span><span class="s1">TypeScript</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">saludo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Compilar y ejecutar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">npx tsc
node dist/index.js</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tsconfig_json_opciones_que_importan">1.7. <code>tsconfig.json</code> — opciones que importan</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ES2020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESNext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"strict"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rootDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"declaration"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"@/*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/*"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/**/*"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>target</code>/<code>module</code>: controlan la sintaxis JS resultante.</p>
</li>
<li>
<p><code>strict</code>: agrupa comprobaciones útiles (activo desde el inicio).</p>
</li>
<li>
<p><code>outDir</code>/<code>rootDir</code>: mantienen la estructura de salida ordenada.</p>
</li>
<li>
<p><code>paths</code> + <code>baseUrl</code>: permiten alias y mejor organización del código.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_flujo_de_trabajo_recomendado">1.8. Flujo de trabajo recomendado</h3>
<div class="ulist">
<ul>
<li>
<p>Durante el desarrollo: bundler rápido (Vite/esbuild) + <code>tsc -w</code> o <code>tsc --noEmit</code> en segundo plano.</p>
</li>
<li>
<p>En CI: ejecutar <code>npm run type-check</code> (<code>tsc --noEmit</code>) y linting (<code>eslint</code>).</p>
</li>
<li>
<p>Para librerías: activar <code>declaration: true</code> para generar <code>.d.ts</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_errores_comunes_y_soluciones_rápidas">1.9. Errores comunes y soluciones rápidas</h3>
<div class="sect3">
<h4 id="_import_alias_no_resuelto">1.9.1. Import alias no resuelto</h4>
<div class="paragraph">
<p>Si <code>@/utils</code> falla, revisa <code>baseUrl</code>/<code>paths</code> y la configuración del bundler (Vite/webpack).</p>
</div>
</div>
<div class="sect3">
<h4 id="_tipos_faltantes_de_dependencias_js">1.9.2. Tipos faltantes de dependencias JS</h4>
<div class="paragraph">
<p>Instala <code>@types/paquete</code> o escribe un <code>declare module 'paquete'</code> mínimo.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tsserver_lento">1.9.3. <code>tsserver</code> lento</h4>
<div class="paragraph">
<p>Excluye carpetas grandes en <code>tsconfig</code> y añade <code>files.exclude</code> en VSCode.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_para_clase_o_tarea">1.10. Ejercicios prácticos (para clase o tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Inicializa un proyecto con <code>typescript</code> como devDependency y añade los scripts <code>build</code> y <code>type-check</code>.</p>
</li>
<li>
<p>Crea <code>src/index.ts</code>, compílalo y ejecútalo.</p>
</li>
<li>
<p>Añade <code>paths</code>/<code>baseUrl</code> y prueba un alias en un archivo importado.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_lecturas_y_recursos_recomendados">1.11. Lecturas y recursos recomendados</h3>
<div class="ulist">
<ul>
<li>
<p>TypeScript Handbook (oficial) — conceptos y ejemplos.</p>
</li>
<li>
<p>Referencia <code>tsconfig.json</code> — para opciones avanzadas.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_2_configuración_y_toolchain_1h">2. Módulo 2 — Configuración y toolchain (1h)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este módulo cubre las decisiones de configuración que más afectan al día a día: <code>tsconfig.json</code> (qué opciones usar y por qué), alias y resolución de módulos, referencias de proyecto (monorepos) y la integración con herramientas modernas (bundlers, <code>ts-node</code>, scripts y CI).</p>
</div>
<div class="sect2">
<h3 id="_tsconfig_json_opciones_esenciales">2.1. <code>tsconfig.json</code> — opciones esenciales</h3>
<div class="sect3">
<h4 id="_target_module_lib">2.1.1. target / module / lib</h4>
<div class="ulist">
<ul>
<li>
<p><code>target</code>: controla la versión de JavaScript que generas (p. ej. <code>ES2019</code>, <code>ES2020</code>). Escoge según el entorno objetivo (Node o navegadores).</p>
</li>
<li>
<p><code>module</code>: <code>CommonJS</code> vs <code>ESNext</code> afecta cómo se emiten <code>import</code>/<code>export</code>.</p>
</li>
<li>
<p><code>lib</code>: añade definiciones (DOM, ES2019, ES2020) para que el compilador conozca APIs disponibles.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_strict_flags_y_control_de_nulabilidad">2.1.2. strict flags y control de nulabilidad</h4>
<div class="ulist">
<ul>
<li>
<p><code>strict</code>: habilita un conjunto de comprobaciones (recomendado desde el inicio).</p>
</li>
<li>
<p><code>noImplicitAny</code>, <code>strictNullChecks</code>, <code>noImplicitReturns</code> ayudan a evitar bugs comunes.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_declaration_sourcemap_y_outdir">2.1.3. declaration, sourceMap y outDir</h4>
<div class="ulist">
<ul>
<li>
<p><code>declaration</code>: genera <code>.d.ts</code> para publicar librerías.</p>
</li>
<li>
<p><code>declarationMap</code>: mapea tipos publicados con el código fuente (útil para debugging de librerías).</p>
</li>
<li>
<p><code>sourceMap</code>: permite mapear <code>.js</code> a <code>.ts</code> en depuración.</p>
</li>
<li>
<p><code>outDir</code> / <code>rootDir</code>: mantienen la salida organizada.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_incremental_composite_y_tsbuildinfofile">2.1.4. incremental, composite y tsBuildInfoFile</h4>
<div class="ulist">
<ul>
<li>
<p><code>incremental</code> + <code>tsBuildInfoFile</code> aceleran compilaciones sucesivas.</p>
</li>
<li>
<p><code>composite: true</code> es obligatorio en subproyectos que se referencian entre sí.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo_tsconfig_json_comentado">2.2. Ejemplo <code>tsconfig.json</code> comentado</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ES2020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESNext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lib"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ES2020"</span><span class="p">,</span><span class="w"> </span><span class="s2">"DOM"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"strict"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"esModuleInterop"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"declaration"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"declarationMap"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rootDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"@app/*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/*"</span><span class="p">]</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"incremental"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tsBuildInfoFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">".tsbuildinfo"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/**/*"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_tsconfig_json_explicación_campo_a_campo">2.2.1. <code>tsconfig.json</code> — explicación campo a campo</h4>
<div class="paragraph">
<p>A continuación se detalla qué hace cada campo y por qué suele configurarse de esa forma en proyectos modernos.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>compilerOptions.target</code> — especifica la versión de JavaScript salida (p. ej. <code>ES2018</code>, <code>ES2020</code>, <code>ESNext</code>). Elige según el entorno objetivo (navegadores o versión de Node).</p>
</li>
<li>
<p><code>compilerOptions.module</code> — controla el sistema de módulos emitido (<code>CommonJS</code>, <code>ESNext</code>). <code>ESNext</code> es la opción habitual con bundlers modernos; <code>CommonJS</code> para Node tradicional.</p>
</li>
<li>
<p><code>compilerOptions.lib</code> — añade definiciones de entorno (<code>DOM</code>, <code>ES2019</code>, <code>DOM.Iterable</code>) para que el compilador conozca APIs disponibles.</p>
</li>
<li>
<p><code>compilerOptions.strict</code> — modo estricto que habilita un conjunto de flags (<code>noImplicitAny</code>, <code>strictNullChecks</code>, <code>strictFunctionTypes</code>, etc.). Recomendado activarlo desde el inicio.</p>
</li>
<li>
<p><code>compilerOptions.esModuleInterop</code> y <code>allowSyntheticDefaultImports</code> — facilitan la interoperabilidad con módulos CommonJS (import por defecto desde paquetes que exponen <code>module.exports</code>).</p>
</li>
<li>
<p><code>outDir</code> / <code>rootDir</code> — controlan la ubicación de salida (<code>outDir</code>) y la raíz de fuentes (<code>rootDir</code>) para mantener la estructura de archivos al compilar.</p>
</li>
<li>
<p><code>declaration</code> / <code>declarationMap</code> — generan <code>.d.ts</code> y mapas de declaración; imprescindibles para bibliotecas que publican tipos.</p>
</li>
<li>
<p><code>sourceMap</code> — (no mostrado arriba) importante si quieres depurar TS en runtime con sourcemaps habilitados.</p>
</li>
<li>
<p><code>baseUrl</code> / <code>paths</code> — permiten alias de import (<code>@app/* → src/*</code>). Muy útiles en monorepos o para evitar rutas relativas profundas; recuerda sincronizar con tu bundler y test runner.</p>
</li>
<li>
<p><code>incremental</code> / <code>tsBuildInfoFile</code> — acelera compilaciones sucesivas creando un archivo <code>.tsbuildinfo</code>; cacheable en CI para acelerar builds.</p>
</li>
<li>
<p><code>composite</code> / <code>references</code> — necesarios para <code>project references</code> en monorepos; habilitan <code>tsc -b</code> y builds parciales.</p>
</li>
<li>
<p><code>skipLibCheck</code> — omite comprobación de tipos en archivos <code>.d.ts</code> de dependencias; útil temporalmente para migraciones, pero no es solución a largo plazo.</p>
</li>
<li>
<p><code>allowJs</code> / <code>checkJs</code> — permiten incluir y/o chequear archivos <code>.js</code> (muy útil durante migraciones incrementales).</p>
</li>
<li>
<p><code>resolveJsonModule</code> / <code>esModuleInterop</code> — permiten importar JSON y mejorar compat con paquetes JS.</p>
</li>
<li>
<p><code>types</code> / <code>typeRoots</code> — controlar qué paquetes de tipos incluir (por ejemplo para limitar <code>@types/*</code> visibles al proyecto).</p>
</li>
<li>
<p><code>noEmit</code> / <code>noEmitOnError</code> — <code>noEmit</code> evita emitir artefactos (útil para <code>tsc --noEmit</code> en CI); <code>noEmitOnError</code> detiene la emisión si hay errores.</p>
</li>
</ul>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_ejemplo_mínimo_recomendado_para_aplicaciones">2.2.2. Ejemplo mínimo recomendado para aplicaciones</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ES2020"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESNext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"strict"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rootDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"moduleResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"esModuleInterop"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"resolveJsonModule"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"skipLibCheck"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/**/*"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Nota: adapta <code>target</code> y <code>module</code> según tu entorno de ejecución/bundler. Mantén <code>strict: true</code> y usa <code>skipLibCheck</code> solo si realmente lo necesitas temporalmente.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paths_y_resolución_de_módulos_baseurl_paths">2.3. Paths y resolución de módulos (baseUrl / paths)</h3>
<div class="ulist">
<ul>
<li>
<p><code>baseUrl</code> define la raíz para imports no relativos; <code>paths</code> crea alias (<code>@app/* → src/*</code>).</p>
</li>
<li>
<p>Importante: estos alias funcionan en compilación/IDE, pero debes sincronizarlos con tu bundler (Vite/webpack) y con herramientas de test (Jest/Vitest) o runtime (<code>tsconfig-paths</code> para Node).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Contexto: ejemplo con alias (`paths`) — muestra el archivo origen y el import que lo consume.</span>
<span class="c1">// src/utils/math.ts</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nf">sum</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="p">}</span>

<span class="c1">// src/main.ts (usa alias @app/* configurado en tsconfig)</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">sum</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@app/utils/math</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_references_y_monorepos">2.4. Project references y monorepos</h3>
<div class="ulist">
<ul>
<li>
<p>Permiten dividir un repo en paquetes con <code>composite: true</code> y <code>references: [{"path":"../core"}]</code>.</p>
</li>
<li>
<p>Ventaja: <code>tsc -b</code> compila sólo lo necesario y genera <code>.d.ts</code> correctamente para cada paquete.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ejemplo mínimo (paquete <code>core</code>) en <code>packages/core/tsconfig.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w"> </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"composite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"outDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lib"</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cómo compilar todo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>en la raíz del monorepo
<span class="go">npx tsc -b packages/*</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_integración_con_herramientas_y_flujo_de_trabajo">2.5. Integración con herramientas y flujo de trabajo</h3>
<div class="sect3">
<h4 id="_ts_node_ts_node_dev">2.5.1. ts-node / ts-node-dev</h4>
<div class="ulist">
<ul>
<li>
<p><code>ts-node</code> ejecuta <code>.ts</code> directamente (útil en scripts/during dev). <code>ts-node-dev</code> añade reinicio automático.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bundlers_modernos_esbuild_swc_vite">2.5.2. Bundlers modernos (esbuild / SWC / Vite)</h4>
<div class="ulist">
<ul>
<li>
<p>Son extremadamente rápidos para el <em>bundling</em> y la transformación, pero <strong>no hacen type-check</strong>. Siempre combinar con <code>tsc --noEmit</code> en CI.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_webpack_rollup">2.5.3. Webpack / Rollup</h4>
<div class="ulist">
<ul>
<li>
<p>Opciones maduras para producción; configurar <code>ts-loader</code> o <code>esbuild-loader</code> según necesidades.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scripts_npm_recomendados">2.6. Scripts npm recomendados</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -p ."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vite"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"start:dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ts-node-dev --respawn src/index.ts"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type-check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc --noEmit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"watch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -w"</span><span class="w">
</span><span class="p">}}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>type-check</code> en CI garantiza que el bundle rápido no oculte errores de tipos.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_source_maps_y_archivos_de_declaración_para_librerías">2.7. Source maps y archivos de declaración para librerías</h3>
<div class="ulist">
<ul>
<li>
<p><code>declarationMap</code> + <code>sourceMap</code> permiten a consumidores de una librería trazar errores al <code>.ts</code> original.</p>
</li>
<li>
<p>Si publicas en npm, asegúrate de incluir <code>types</code>/<code>typesVersions</code> en <code>package.json</code> cuando corresponda.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_diagnóstico_y_comandos_útiles">2.8. Diagnóstico y comandos útiles</h3>
<div class="ulist">
<ul>
<li>
<p><code>npx tsc --showConfig</code> muestra la configuración efectiva.</p>
</li>
<li>
<p><code>npx tsc --traceResolution</code> ayuda a depurar resolución de módulos.</p>
</li>
<li>
<p><code>npx tsc -b --verbose</code> para ver build graph en project references.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_y_antipatterns">2.9. Buenas prácticas y antipatterns</h3>
<div class="ulist">
<ul>
<li>
<p>Activar <code>strict</code> desde el inicio y practicar la corrección incremental.</p>
</li>
<li>
<p>Evitar <code>skipLibCheck</code> salvo en casos necesarios (oculta problemas en dependencias).</p>
</li>
<li>
<p>No confiar sólo en el bundler para la comprobación de tipos.</p>
</li>
<li>
<p>Evitar <code>allowJs</code> en librerías publicadas.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sección_práctica_ejercicios">2.10. Sección práctica (ejercicios)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1: Crear un <code>tsconfig.json</code> con <code>baseUrl</code>/<code>paths</code> y verificar resolución en VSCode y Vite.</p>
</li>
<li>
<p>Ejercicio 2: Montar un mini-monorepo con <code>packages/core</code> y <code>packages/app</code> usando project references; compilar con <code>tsc -b</code>.</p>
</li>
<li>
<p>Ejercicio 3: Añadir <code>type-check</code> a la pipeline de CI (ejecuta <code>tsc --noEmit</code>) y configurar caché para <code>.tsbuildinfo</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_3_tipos_básicos_y_anotaciones_2h">3. Módulo 3 — Tipos básicos y anotaciones (2h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tipos_primitivos_explicación_y_ejemplos">3.1. Tipos primitivos: explicación y ejemplos</h3>
<div class="paragraph">
<p>Los tipos primitivos (<code>string</code>, <code>number</code>, <code>boolean</code>) son la base del modelado en TypeScript. El compilador usa la información de tipos para detectar errores comunes (por ejemplo, pasar un <code>number</code> donde se espera un <code>string</code>).</p>
</div>
<div class="sect3">
<h4 id="_ejemplos_básicos">3.1.1. Ejemplos básicos</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">let</span> <span class="nx">nombre</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Alicia</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">edad</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">activo</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_literal_types_y_usos_prácticos">3.1.2. Literal types y usos prácticos</h4>
<div class="paragraph">
<p>Los <strong>literal types</strong> limitan los valores permitidos y permiten modelar estados o opciones sin crear enums.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Status</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">idle</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">setStatus</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="nx">Status</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="nf">setStatus</span><span class="p">(</span><span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="c1">// setStatus('waiting') // Error: 'waiting' no forma parte de Status</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_colecciones_y_estructuras">3.2. Colecciones y estructuras</h3>
<div class="sect3">
<h4 id="_arrays_y_readonly">3.2.1. Arrays y <code>readonly</code></h4>
<div class="ulist">
<ul>
<li>
<p><code>T[]</code> y <code>Array&lt;T&gt;</code> representan colecciones tipadas. <code>ReadonlyArray&lt;T&gt;</code> o <code>readonly T[]</code> protegen contra mutaciones desde la API pública.</p>
</li>
<li>
<p>Los métodos de array devuelven nuevos arrays o valores y aceptan callbacks tipadas <code>(value, index, array) &#8658; R</code> — las arrow functions (<code>&#8658;</code>) son la forma habitual.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// formas de declarar</span>
<span class="kd">type</span> <span class="nx">User</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ana</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">30</span> <span class="p">},</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Luis</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">20</span> <span class="p">}</span> <span class="p">];</span>
<span class="kd">const</span> <span class="nx">tags</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">ts</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">js</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">fixed</span><span class="p">:</span> <span class="k">readonly</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">]</span> <span class="kd">as const</span><span class="p">;</span> <span class="c1">// readonly, no push/pop</span>

<span class="c1">// map: proyecta cada elemento (inferencia automática del tipo de retorno)</span>
<span class="kd">const</span> <span class="nx">names</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">u</span> <span class="o">=&gt;</span> <span class="nx">u</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// string[]</span>

<span class="c1">// filter: estrecha y devuelve subconjunto tipado</span>
<span class="kd">const</span> <span class="nx">adults</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">u</span> <span class="o">=&gt;</span> <span class="nx">u</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">);</span> <span class="c1">// User[]</span>

<span class="c1">// find: devuelve T | undefined</span>
<span class="kd">const</span> <span class="nx">firstAdult</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="nx">u</span> <span class="o">=&gt;</span> <span class="nx">u</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">);</span> <span class="c1">// User | undefined</span>
<span class="k">if </span><span class="p">(</span><span class="nx">firstAdult</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">firstAdult</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// narrowing</span>

<span class="c1">// reduce: acumula con tipo explícito para el acumulador</span>
<span class="kd">const</span> <span class="nx">totalAge</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">u</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">acc</span> <span class="o">+</span> <span class="nx">u</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// number</span>

<span class="c1">// forEach: iteración con efecto (devuelve void)</span>
<span class="nx">users</span><span class="p">.</span><span class="nf">forEach</span><span class="p">(</span><span class="nx">u</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>

<span class="c1">// flatMap: map + flatten (útil para arrays anidados)</span>
<span class="kd">const</span> <span class="nx">tagsPerUser</span><span class="p">:</span> <span class="kr">string</span><span class="p">[][]</span> <span class="o">=</span> <span class="p">[[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">],</span> <span class="p">[</span><span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]];</span>
<span class="kd">const</span> <span class="nx">allTags</span> <span class="o">=</span> <span class="nx">tagsPerUser</span><span class="p">.</span><span class="nf">flatMap</span><span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">);</span> <span class="c1">// string[]</span>

<span class="c1">// sort muta el array: clonar si quieres inmutabilidad</span>
<span class="kd">const</span> <span class="nx">sortedByAge</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">users</span><span class="p">].</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>

<span class="c1">// Ejemplo: encadenado y reducción tipada</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">users</span>
  <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">u</span> <span class="o">=&gt;</span> <span class="nx">u</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">u</span> <span class="o">=&gt;</span> <span class="nx">u</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">reduce</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">acc</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="k">return</span> <span class="nx">acc</span> <span class="p">},</span> <span class="p">[]);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_callbacks_tipadas_y_firma_de_los_métodos">3.2.2. Callbacks tipadas y firma de los métodos</h4>
<div class="ulist">
<ul>
<li>
<p>Firma típica de <code>map</code>/<code>filter</code>: <code>(value: T, index: number, array: T[]) &#8658; R</code>.</p>
</li>
<li>
<p>Puedes declarar el tipo explícito cuando la inferencia no es suficiente:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">const</span> <span class="nx">upperNames</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">u</span><span class="p">:</span> <span class="nx">User</span><span class="p">,</span> <span class="nx">i</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">string</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">u</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="kd">function</span> <span class="nf">pluck</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">K</span> <span class="kd">extends</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arr</span><span class="p">:</span> <span class="nx">T</span><span class="p">[],</span> <span class="nx">key</span><span class="p">:</span> <span class="nx">K</span><span class="p">):</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">][]</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">arr</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">ids</span> <span class="o">=</span> <span class="nf">pluck</span><span class="p">(</span><span class="nx">users</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// string[]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inmutabilidad_y_readonlyarray_as_const">3.3. Inmutabilidad y <code>ReadonlyArray</code> / <code>as const</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>readonly</code> evita métodos mutables (push/pop/splice). Para crear arrays literales inmutables usa <code>as const</code> (produce tuplas readonly con literales literales).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="kd">as const</span><span class="p">;</span>        <span class="c1">// readonly [1,2,3]</span>
<span class="c1">// nums.push(4) // Error: método no disponible</span>
<span class="kd">const</span> <span class="nx">ro</span><span class="p">:</span> <span class="nx">ReadonlyArray</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_y_rendimiento">3.4. Buenas prácticas y rendimiento</h3>
<div class="ulist">
<ul>
<li>
<p>Prefiere los métodos <code>map</code>/<code>filter</code>/<code>reduce</code> para expresividad y menor probabilidad de errores; usa bucles <code>for</code> cuando la micro‑optimización sea crítica.</p>
</li>
<li>
<p>Evita mutar arrays compartidos; clona con spread (<code>[&#8230;&#8203;]</code>) antes de <code>sort</code>/<code>reverse</code>.</p>
</li>
<li>
<p>Tipa siempre las funciones públicas que aceptan callbacks para evitar <code>any</code> accidental.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_errores_comunes">3.5. Errores comunes</h3>
<div class="ulist">
<ul>
<li>
<p>Olvidar que <code>sort</code> muta el array original.</p>
</li>
<li>
<p>Usar <code>any</code> en callbacks y perder inferencia de tipos.</p>
</li>
<li>
<p>Exponer arrays mutables desde APIs públicas sin <code>readonly</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_rápidos">3.6. Ejercicios rápidos</h3>
<div class="ulist">
<ul>
<li>
<p>Implementa <code>unique&lt;T&gt;(arr: T[]): T[]</code> usando <code>filter</code> y <code>indexOf</code>.</p>
</li>
<li>
<p>Escribe <code>groupBy&lt;T, K extends string&gt;(arr: T[], fn: (t: T) &#8658; K): Record&lt;K, T[]&gt;</code> con <code>reduce</code>.</p>
</li>
<li>
<p>Implementa <code>pluck</code> (se mostró arriba) y escríbelo con tipos genéricos.</p>
</li>
<li>
<p>Escribe tests con <code>vitest</code> para <code>groupBy</code> y <code>unique</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_tuplas_tuples">3.6.1. Tuplas (tuples)</h4>
<div class="paragraph">
<p>Las tuplas modelan arrays de longitud fija con tipos por posición.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Point</span> <span class="o">=</span> <span class="p">[</span><span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">p</span><span class="p">:</span> <span class="nx">Point</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">];</span>
<span class="c1">// p[0] es number, p[1] es number</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_enums_vs_union_de_literales">3.6.2. Enums vs union de literales</h4>
<div class="ulist">
<ul>
<li>
<p><code>enum</code> genera valores en tiempo de ejecución; útil cuando necesitas ese valor en runtime.</p>
</li>
<li>
<p>Para la mayoría de los casos en aplicaciones, <code>union</code> de literales es más ligero y más fácil de analizar por el compilador.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">enum</span> <span class="nx">ColorEnum</span> <span class="p">{</span> <span class="nx">Red</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span> <span class="nx">Green</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">ColorUnion</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_null_undefined_y_control_de_nulabilidad">3.7. Null / Undefined y control de nulabilidad</h3>
<div class="paragraph">
<p>Con <code>--strict</code> activo, TypeScript diferencia entre <code>T</code>, <code>T | undefined</code> y <code>T | null</code>.</p>
</div>
<div class="sect3">
<h4 id="_opcionales_y_operadores">3.7.1. Opcionales y operadores</h4>
<div class="ulist">
<ul>
<li>
<p>Propiedad opcional <code>name?: string</code> ≡ <code>name: string | undefined</code>.</p>
</li>
<li>
<p>Uso de <code>NonNullable&lt;T&gt;</code> para excluir <code>null</code> y <code>undefined</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">saludo</span><span class="p">(</span><span class="nx">nombre</span><span class="p">?:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">nombre</span><span class="p">)</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">Hola, invitado</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">return</span> <span class="s2">`Hola, </span><span class="p">${</span><span class="nx">nombre</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span> <span class="c1">// nombre ya está estrechado</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inferencia_de_tipos_y_cuándo_anotar">3.8. Inferencia de tipos y cuándo anotar</h3>
<div class="paragraph">
<p>TypeScript infiere tipos por defecto; suele ser preferible dejar que infiera cuando la intención es obvia y anotar interfaces o APIs públicas.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Evita anotaciones redundantes en variables locales.</p>
</li>
<li>
<p>Anota funciones exportadas y tipos de datos que forman parte del contrato del módulo.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// inferido como number</span>
<span class="kd">function</span> <span class="nf">doble</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// anotar parámetros públicos</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_declaración_implícita_vs_explícita_variables_primitivas">3.8.1. Declaración implícita vs explícita (variables primitivas)</h4>
<div class="paragraph">
<p>TypeScript puede inferir el tipo a partir del valor inicial (declaración implícita) o aceptar una anotación explícita por parte del desarrollador. A continuación: ejemplos, diferencias prácticas y cuándo preferir cada enfoque.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// 1) Declaración implícita — TypeScript infiere el tipo desde el valor</span>
<span class="kd">let</span> <span class="nx">edad</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>           <span class="c1">// edad: number (inferencia)</span>
<span class="kd">const</span> <span class="nx">saludo</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hola</span><span class="dl">'</span><span class="p">;</span>   <span class="c1">// saludo: "Hola" (literal si es const)</span>

<span class="c1">// 2) Declaración explícita — el desarrollador fija el tipo</span>
<span class="kd">let</span> <span class="nx">edadExplicita</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">saludoExplicito</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hola</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// 3) Peligro: variable sin inicializar -&gt; any (si noImplicitAny = false)</span>
<span class="kd">let</span> <span class="nx">sinInicializar</span><span class="p">;</span>      <span class="c1">// any  &lt;-- evitar</span>
<span class="kd">let</span> <span class="nx">sinInicializarOk</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// correcto con anotación</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_const_vs_let_literal_widening">3.8.2. Const vs let — literal widening</h4>
<div class="ulist">
<ul>
<li>
<p><code>const s = 'x'</code> infiere el tipo literal <code>'x'</code>.</p>
</li>
<li>
<p><code>let s = 'x'</code> infiere <code>string</code> (se <strong>widened</strong>).</p>
</li>
<li>
<p>Usa <code>as const</code> para fijar literales en arrays/objetos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">const</span> <span class="nx">lit</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hola</span><span class="dl">'</span> <span class="kd">as const</span><span class="p">;</span> <span class="c1">// tipo: 'hola'</span>
<span class="kd">let</span> <span class="nx">widened</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hola</span><span class="dl">'</span><span class="p">;</span>        <span class="c1">// tipo: string</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cuándo_usar_implícita_y_cuándo_explícita">3.8.3. ¿Cuándo usar implícita y cuándo explícita?</h4>
<div class="ulist">
<ul>
<li>
<p>Implícita: variables locales y temporales donde la intención queda clara; reduce ruido.</p>
</li>
<li>
<p>Explícita: surface pública (exports, parámetros/retornos públicos), propiedades de clase sin inicializador, variables que deben cumplir un contrato (uniones, literales), o para evitar <code>any</code> accidental.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_buenas_prácticas_rápidas">3.8.4. Buenas prácticas rápidas</h4>
<div class="ulist">
<ul>
<li>
<p>Activa <code>strict</code> y <code>noImplicitAny</code> para evitar sorpresas.</p>
</li>
<li>
<p>No relies en inferencia para la API pública: documenta la intención con anotaciones.</p>
</li>
<li>
<p>Prefiere inferencia en código interno y anotaciones claras en la superficie del módulo.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_assertions_as_y_unknown">3.9. Type assertions (<code>as</code>) y <code>unknown</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>as</code> fuerza al compilador a tratar un valor como otro tipo; úsalo con cuidado.</p>
</li>
<li>
<p><code>unknown</code> es el sustituto seguro de <code>any</code>: obliga a comprobar/estrechar antes de usar.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">const</span> <span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">{}</span><span class="dl">'</span><span class="p">);</span>
<span class="k">if </span><span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// aquí ya podemos estrechar y acceder con seguridad</span>
<span class="p">}</span>
<span class="c1">// Evita `any` salvo en casos justificados</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_any_vs_unknown_comparativa_rápida">3.10. <code>any</code> vs <code>unknown</code> (comparativa rápida)</h3>
<div class="ulist">
<ul>
<li>
<p><code>any</code>: desactiva comprobaciones de tipos (peligroso).</p>
</li>
<li>
<p><code>unknown</code>: obliga a realizar checks antes de operar (más seguro).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_type_guards_y_narrowing_estrechamiento_de_tipos">3.11. Type guards y narrowing (estrechamiento de tipos)</h3>
<div class="paragraph">
<p>Type guards permiten a TypeScript deducir el tipo real en un bloque condicional: <code>typeof</code>, <code>instanceof</code>, <code>in</code> y <strong>user-defined guards</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Contexto: user-defined type guard + ejemplo de uso real.</span>
<span class="kd">type</span> <span class="nx">Cat</span> <span class="o">=</span> <span class="p">{</span> <span class="na">meow</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">Dog</span> <span class="o">=</span> <span class="p">{</span> <span class="na">bark</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span> <span class="p">};</span>
<span class="kd">function</span> <span class="nf">isCat</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="nx">Cat</span> <span class="o">|</span> <span class="nx">Dog</span><span class="p">):</span> <span class="nx">a</span> <span class="k">is</span> <span class="nx">Cat</span> <span class="p">{</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">meow</span><span class="dl">'</span> <span class="k">in </span><span class="p">(</span><span class="nx">a</span> <span class="kd">as </span><span class="kr">any</span><span class="p">);</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nf">speak</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="nx">Cat</span> <span class="o">|</span> <span class="nx">Dog</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="nf">isCat</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// aquí `a` ya está estrechado a `Cat`</span>
    <span class="nx">a</span><span class="p">.</span><span class="nf">meow</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">.</span><span class="nf">bark</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Ejemplo de ejecución</span>
<span class="kd">const</span> <span class="nx">pet1</span><span class="p">:</span> <span class="nx">Cat</span> <span class="o">|</span> <span class="nx">Dog</span> <span class="o">=</span> <span class="p">{</span> <span class="nf">meow</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">meow</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">pet2</span><span class="p">:</span> <span class="nx">Cat</span> <span class="o">|</span> <span class="nx">Dog</span> <span class="o">=</span> <span class="p">{</span> <span class="nf">bark</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">bark</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span> <span class="p">};</span>
<span class="nf">speak</span><span class="p">(</span><span class="nx">pet1</span><span class="p">);</span> <span class="c1">// meow</span>
<span class="nf">speak</span><span class="p">(</span><span class="nx">pet2</span><span class="p">);</span> <span class="c1">// bark</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_discriminated_unions_uniones_discriminadas">3.12. Discriminated unions (uniones discriminadas)</h3>
<div class="paragraph">
<p>Patrón muy útil para modelar variantes con una propiedad discriminadora (<code>kind</code>, <code>type</code>). Facilita el <strong>narrowing</strong> exhaustivo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Shape</span> <span class="o">=</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="dl">'</span><span class="s1">circle</span><span class="dl">'</span><span class="p">;</span> <span class="nl">r</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rect</span><span class="dl">'</span><span class="p">;</span> <span class="nl">w</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">h</span><span class="p">:</span> <span class="kr">number</span> <span class="p">};</span>
<span class="kd">function</span> <span class="nf">area</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="nx">Shape</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch </span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">kind</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">circle</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">s</span><span class="p">.</span><span class="nx">r</span> <span class="o">*</span> <span class="nx">s</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">rect</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">w</span> <span class="o">*</span> <span class="nx">s</span><span class="p">.</span><span class="nx">h</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_reglas_rápidas">3.13. Buenas prácticas (reglas rápidas)</h3>
<div class="ulist">
<ul>
<li>
<p>Activa <code>strict</code> desde el inicio. ✅</p>
</li>
<li>
<p>Prefiere <code>unknown</code> sobre <code>any</code>. ✅</p>
</li>
<li>
<p>Prefiere <code>union</code> literal para estados simples; usa <code>enum</code> si necesitas el valor en runtime.</p>
</li>
<li>
<p>Anota la API pública (exports), confía en la inferencia en código interno.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplos_y_ejercicios_propuestos">3.14. Ejemplos y ejercicios propuestos</h3>
<div class="sect3">
<h4 id="_ejercicio_1_modela_user_y_valida">3.14.1. Ejercicio 1 — Modela <code>User</code> y valida</h4>
<div class="ulist">
<ul>
<li>
<p>Crea un tipo <code>User</code> con propiedades: <code>id: string | number</code>, <code>name: string</code>, <code>email?: string</code>, <code>role: 'user' | 'admin'</code>.</p>
</li>
<li>
<p>Escribe un <strong>user-defined type guard</strong> <code>isUser(x: unknown): x is User</code> que valide la forma del objeto.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejercicio_2_tuplas_y_utilidades">3.14.2. Ejercicio 2 — Tuplas y utilidades</h4>
<div class="ulist">
<ul>
<li>
<p>Define una tupla <code>RGB = [number, number, number]</code> y una función <code>toHex(c: RGB): string</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejercicio_3_null_y_opcionales">3.14.3. Ejercicio 3 — Null y opcionales</h4>
<div class="ulist">
<ul>
<li>
<p>Implementa <code>getDisplayName(u?: User | null): string</code> que devuelva un valor por defecto si <code>u</code> es <code>null</code>/<code>undefined</code> o <code>u.name</code> está vacío.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejercicio_4_práctica_de_narrowing">3.14.4. Ejercicio 4 — Práctica de narrowing</h4>
<div class="ulist">
<ul>
<li>
<p>Dado <code>type Event = { type: 'click'; x:number;y:number } | { type: 'keypress'; key: string }</code>, escribe un handler que trate ambos casos con seguridad de tipos.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_4_funciones_y_tipado_de_api_2h">4. Módulo 4 — Funciones y tipado de API (2h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_firmas_de_función_y_sobrecargas_explicación">4.1. Firmas de función y sobrecargas (explicación)</h3>
<div class="paragraph">
<p>Las funciones son el principal mecanismo para definir contratos en TypeScript. Tipar correctamente las firmas mejora la legibilidad, la seguridad y la experiencia en el editor.</p>
</div>
<div class="sect3">
<h4 id="_declaración_de_tipos_para_funciones">4.1.1. Declaración de tipos para funciones</h4>
<div class="ulist">
<ul>
<li>
<p>Sintaxis de función: <code>function fn(a: A): R</code>.</p>
</li>
<li>
<p>Tipos de función como valores: <code>(a: A) &#8658; R</code> y <code>type Fn = (a: A) &#8658; R</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">sum</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">multiply</span><span class="p">:</span> <span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">number</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">Predicate</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">v</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_overloads_vs_unions">4.1.2. Overloads vs unions</h4>
<div class="ulist">
<ul>
<li>
<p>Usa <strong>overloads</strong> cuando la función tiene varias formas públicas con comportamientos distintos en tiempo de ejecución.</p>
</li>
<li>
<p>Para casos simples, <code>unions</code> o <code>generics</code> pueden ser más legibles.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Overload example</span>
<span class="kd">function</span> <span class="nf">format</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">string</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">format</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">string</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">format</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nc">String</span><span class="p">(</span><span class="nx">x</span><span class="p">).</span><span class="nf">trim</span><span class="p">();</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parámetros_valores_por_defecto_y_this_contexto">4.2. Parámetros, valores por defecto y <code>this</code> (contexto)</h3>
<div class="sect3">
<h4 id="_parámetros_opcionales_rest_y_defaults">4.2.1. Parámetros opcionales, rest y defaults</h4>
<div class="ulist">
<ul>
<li>
<p>Parámetros opcionales <code>a?: T</code> ≡ <code>a: T | undefined</code>.</p>
</li>
<li>
<p><code>&#8230;&#8203;rest: T[]</code> para argumentos variables.</p>
</li>
<li>
<p>Valores por defecto <code>fn(x = 10)</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">build</span><span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">flags</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">...</span><span class="nx">tags</span><span class="p">:</span> <span class="kr">string</span><span class="p">[])</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">flags</span><span class="p">,</span> <span class="nx">tags</span> <span class="p">};</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tipado_de_this">4.2.2. Tipado de <code>this</code></h4>
<div class="ulist">
<ul>
<li>
<p>TypeScript permite declarar el tipo de <code>this</code> en la firma de la función para evitar errores en callbacks/métodos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">handler</span><span class="p">(</span><span class="k">this</span><span class="p">:</span> <span class="nx">HTMLButtonElement</span><span class="p">,</span> <span class="nx">e</span><span class="p">:</span> <span class="nx">Event</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// addEventListener('click', handler) // VSCode sabe el tipo de `this`</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_utilidades_útiles_para_funciones">4.3. Utilidades útiles para funciones</h3>
<div class="paragraph">
<p>TypeScript proporciona utilidades que extraen tipos desde funciones: <code>Parameters</code>, <code>ReturnType</code>, <code>ThisParameterType</code>, <code>InstanceType</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">fetchJson</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nf">then</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">FetchArgs</span> <span class="o">=</span> <span class="nb">Parameters</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">fetchJson</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// [string]</span>
<span class="kd">type</span> <span class="nx">FetchResult</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">ReturnType</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">fetchJson</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// Promise&lt;T&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apis_asíncronas_y_manejo_de_errores_tipado">4.4. APIs asíncronas y manejo de errores tipado</h3>
<div class="sect3">
<h4 id="_tipar_fetchrequest_con_generics">4.4.1. Tipar <code>fetch</code>/request con generics</h4>
<div class="ulist">
<ul>
<li>
<p>Usa genéricos en wrappers de red para propagar tipos desde la llamada hasta el consumidor.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Contexto: wrapper minimalista de `fetch` que propaga el tipo `T` al consumidor.</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">request</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
  <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">r</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">r</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span> <span class="kd">as </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Ejemplo de uso: definir interfaz y consumir con manejo de errores</span>
<span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="p">(</span><span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">request</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://jsonplaceholder.typicode.com/users/1</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.name =</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">request failed:</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span> <span class="kd">as </span><span class="nb">Error</span><span class="p">).</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_patrón_result_alternativa_a_excepciones">4.4.2. Patrón Result (alternativa a excepciones)</h4>
<div class="ulist">
<ul>
<li>
<p>Para librerías públicas, devolver <code>Result&lt;T, E&gt;</code> evita excepciones impuras y facilita el testeo.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Result</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">E</span> <span class="o">=</span> <span class="nb">Error</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ok</span><span class="p">:</span> <span class="kc">true</span><span class="p">;</span> <span class="nl">value</span><span class="p">:</span> <span class="nx">T</span> <span class="p">}</span> <span class="o">|</span> <span class="p">{</span> <span class="na">ok</span><span class="p">:</span> <span class="kc">false</span><span class="p">;</span> <span class="nl">error</span><span class="p">:</span> <span class="nx">E</span> <span class="p">};</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">safeRequest</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Result</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span> <span class="k">return</span> <span class="p">{</span> <span class="na">ok</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="k">await</span> <span class="nx">request</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
  <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">{</span> <span class="na">ok</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">error</span><span class="p">:</span> <span class="nx">error</span> <span class="kd">as </span><span class="nb">Error</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_patrones_y_diseño_de_apis_tipadas">4.5. Patrones y diseño de APIs tipadas</h3>
<div class="ulist">
<ul>
<li>
<p>Anotar la <strong>firma pública</strong> de funciones exportadas.</p>
</li>
<li>
<p>Preferir genéricos bien nombrados a sobrecargas excesivas.</p>
</li>
<li>
<p>Mantener las funciones pequeñas y composables; usar helpers genéricos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Middleware</span><span class="o">&lt;</span><span class="nx">Req</span><span class="p">,</span> <span class="nx">Res</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">Req</span><span class="p">,</span> <span class="nx">next</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Res</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Res</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">runMiddlewares</span><span class="o">&lt;</span><span class="nx">Req</span><span class="p">,</span> <span class="nx">Res</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">Req</span><span class="p">,</span> <span class="nx">mws</span><span class="p">:</span> <span class="nx">Middleware</span><span class="o">&lt;</span><span class="nx">Req</span><span class="p">,</span> <span class="nx">Res</span><span class="o">&gt;</span><span class="p">[]):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Res</span><span class="o">&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_para_apis_de_función">4.6. Buenas prácticas para APIs de función</h3>
<div class="ulist">
<ul>
<li>
<p>Documentar la firma pública y la semántica de errores.</p>
</li>
<li>
<p>Preferir <code>unknown</code> para entradas externas y validar/estrechar internamente.</p>
</li>
<li>
<p>Evitar <code>any</code> en la superficie de la API.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_y_taller_clase">4.7. Ejercicios prácticos y taller (clase)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Implementa <code>retry&lt;T&gt;</code>:</p>
</li>
<li>
<p>Firma: <code>async function retry&lt;T&gt;(fn: () &#8658; Promise&lt;T&gt;, attempts: number): Promise&lt;T&gt;</code></p>
</li>
<li>
<p>Reintentar en errores temporales y tipar correctamente el retorno.</p>
<div class="literalblock">
<div class="content">
<pre>Ejemplo de implementación (solución de ejemplo):
[source,ts]
----
// reintenta `fn` hasta `attempts` veces con backoff simple
async function retry&lt;T&gt;(fn: () =&gt; Promise&lt;T&gt;, attempts: number): Promise&lt;T&gt; {
  let lastError: unknown;
  for (let i = 0; i &lt; attempts; i++) {
    try { return await fn(); }
    catch (err) {
      lastError = err;
      if (i === attempts - 1) break;
      await new Promise(r =&gt; setTimeout(r, 100 * (i + 1))); // backoff
    }
  }
  throw lastError;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// uso de ejemplo: función con fallo intermitente
let tries = 0;
async function flaky(): Promise&lt;string&gt; {
  tries++;
  if (tries &lt; 3) throw new Error('temporary');
  return 'OK';
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>(async () =&gt; { console.log(await retry(flaky, 5)) })();
----</pre>
</div>
</div>
</li>
<li>
<p>Ejercicio 2 — Cliente HTTP tipado:</p>
</li>
<li>
<p>Crea <code>apiGet&lt;T&gt;(url: string): Promise&lt;T&gt;</code> que use <code>request&lt;T&gt;</code> y devuelva <code>Result&lt;T&gt;</code> en su variante segura.</p>
</li>
<li>
<p>Ejercicio 3 — Middleware tipado:</p>
</li>
<li>
<p>Define <code>Middleware&lt;Req, Res&gt;</code> y un <code>compose</code> que combine middlewares con seguridad de tipos.</p>
</li>
<li>
<p>Ejercicio 4 — Sobrecargas y genéricos:</p>
</li>
<li>
<p>Escribe una función <code>parse(value: string): string</code> y <code>parse(value: string, asNumber: true): number</code> usando sobrecargas bien tipadas.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_5_interfaces_y_tipos_compuestos_2h">5. Módulo 5 — Interfaces y tipos compuestos (2h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_interface_vs_type_reglas_prácticas">5.1. <code>interface</code> vs <code>type</code> — reglas prácticas</h3>
<div class="paragraph">
<p>Breve resumen: <code>interface</code> es ideal para objetos extensibles y APIs públicas (soporta declaration merging). <code>type</code> es más flexible para uniones, intersecciones y tipos complejos (tuplas, mapped types). Elige <code>interface</code> para contratos abiertos y <code>type</code> para composiciones y alias.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// interface (extensible)</span>
<span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span> <span class="nl">email</span><span class="p">?:</span> <span class="kr">string</span> <span class="p">}</span> <span class="c1">// declaration merging</span>

<span class="c1">// type (alias flexible)</span>
<span class="kd">type</span> <span class="nx">ID</span> <span class="o">=</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">Point</span> <span class="o">=</span> <span class="p">[</span><span class="kr">number</span><span class="p">,</span> <span class="kr">number</span><span class="p">];</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_extensión_y_reutilización">5.2. Extensión y reutilización</h3>
<div class="ulist">
<ul>
<li>
<p><code>extends</code> para interfaces y <code>&amp;</code> para <code>type</code> (intersections).</p>
</li>
<li>
<p>Preferir herencia ligera (extends) para modelos relacionados; usar intersecciones para mezclar capacidades.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">Base</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
<span class="kr">interface</span> <span class="nx">Admin</span> <span class="kd">extends</span> <span class="nx">Base</span> <span class="p">{</span> <span class="nl">role</span><span class="p">:</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">WithTimestamp</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">createdAt</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_composición_de_tipos_unions_y_intersections">5.3. Composición de tipos: unions y intersections</h3>
<div class="ulist">
<ul>
<li>
<p>Unión (<code>A | B</code>): alternativas (usar discriminadores para narrowing).</p>
</li>
<li>
<p>Intersección (<code>A &amp; B</code>): combinación de propiedades/behaviors.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Success</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ok</span><span class="dl">'</span><span class="p">;</span> <span class="nl">data</span><span class="p">:</span> <span class="kr">any</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">Failure</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">;</span> <span class="nl">message</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">ApiResponse</span> <span class="o">=</span> <span class="nx">Success</span> <span class="o">|</span> <span class="nx">Failure</span><span class="p">;</span> <span class="c1">// discriminated union</span>

<span class="kd">type</span> <span class="nx">Persisted</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">createdAt</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_index_signatures_y_record_objetos_dinámicos">5.4. Index signatures y <code>Record</code> (objetos dinámicos)</h3>
<div class="ulist">
<ul>
<li>
<p>Index signature: cuando las claves no están predefinidas.</p>
</li>
<li>
<p><code>Record&lt;K,T&gt;</code>: forma declarativa y segura de mapear claves conocidas o string/number.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">StringMap</span> <span class="p">{</span> <span class="p">[</span><span class="nx">k</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">scores</span><span class="p">:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="dl">'</span><span class="s1">alice</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">bob</span><span class="dl">'</span><span class="p">,</span> <span class="kr">number</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="na">alice</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">bob</span><span class="p">:</span> <span class="mi">8</span> <span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapped_types_y_key_remapping">5.5. Mapped types y key remapping</h3>
<div class="paragraph">
<p>Mapped types transforman tipos existentes (ej.: <code>Partial</code>, <code>Readonly</code>). Con remapeo de claves (<code>as</code>) puedes renombrar o aplicar prefijos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// implementar Partial&lt;T&gt; + ejemplo de uso</span>
<span class="kd">type</span> <span class="nx">MyPartial</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="p">]?:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="p">};</span>
<span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">active</span><span class="p">:</span> <span class="nx">boolean</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">partialUser</span><span class="p">:</span> <span class="nx">MyPartial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ana</span><span class="dl">'</span> <span class="p">};</span> <span class="c1">// válido</span>

<span class="c1">// remapeo de claves: añadir prefijo + ejemplo de uso</span>
<span class="kd">type</span> <span class="nx">Prefixed</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">P</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span> <span class="kd">as </span><span class="s2">`</span><span class="p">${</span><span class="nx">P</span> <span class="o">&amp;</span> <span class="kr">string</span><span class="p">}${</span><span class="nx">K</span> <span class="o">&amp;</span> <span class="kr">string</span><span class="p">}</span><span class="s2">`</span><span class="p">]:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">PrefixedUser</span> <span class="o">=</span> <span class="nx">Prefixed</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">,</span> <span class="dl">'</span><span class="s1">data-</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">p</span><span class="p">:</span> <span class="nx">PrefixedUser</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="dl">'</span><span class="s1">data-id</span><span class="dl">'</span><span class="p">]:</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">data-name</span><span class="dl">'</span><span class="p">]:</span> <span class="dl">'</span><span class="s1">Ana</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">data-active</span><span class="dl">'</span><span class="p">]:</span> <span class="kc">true</span> <span class="p">}</span> <span class="kd">as </span><span class="kr">any</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">partialUser</span><span class="p">,</span> <span class="nx">p</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_utility_types_en_la_práctica">5.6. Utility types en la práctica</h3>
<div class="ulist">
<ul>
<li>
<p><code>Partial&lt;T&gt;</code>, <code>Required&lt;T&gt;</code>, <code>Readonly&lt;T&gt;</code>, <code>Pick&lt;T,K&gt;</code>, <code>Omit&lt;T,K&gt;</code>, <code>Record&lt;K,T&gt;</code> facilitan mantenimiento y evitan duplicar modelos.</p>
</li>
<li>
<p>Usa <code>Omit</code> para crear DTOs a partir de entidades (p. ej. quitar <code>password</code> o <code>id</code>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">password</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">PublicUser</span> <span class="o">=</span> <span class="nb">Omit</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">,</span> <span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">NewUser</span> <span class="o">=</span> <span class="nb">Omit</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">password</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_patrones_de_modelado_dtos_entities_y_value_objects">5.7. Patrones de modelado: DTOs, Entities y Value Objects</h3>
<div class="ulist">
<ul>
<li>
<p>DTO: formato de entrada/salida (ligero, validable).</p>
</li>
<li>
<p>Entity: objeto del dominio con invariantes y comportamiento.</p>
</li>
<li>
<p>Value Object: tipo inmutable que encapsula lógica (ej.: <code>Email</code>, <code>Money</code>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">UserEntity</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">email</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">createdAt</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">CreateUserDTO</span> <span class="o">=</span> <span class="nb">Omit</span><span class="o">&lt;</span><span class="nx">UserEntity</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">createdAt</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">toEntity</span><span class="p">(</span><span class="nx">dto</span><span class="p">:</span> <span class="nx">CreateUserDTO</span><span class="p">):</span> <span class="nx">UserEntity</span> <span class="p">{</span> <span class="cm">/* validar y añadir campos */</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">implementar</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tipos_híbridos_y_firmas_de_llamada">5.8. Tipos híbridos y firmas de llamada</h3>
<div class="paragraph">
<p>Las <code>interface</code> pueden describir objetos que también son funciones (callable objects) o que tengan propiedades y métodos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">Counter</span> <span class="p">{</span> <span class="p">(</span><span class="nx">start</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span> <span class="nl">value</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">counter</span><span class="p">:</span> <span class="nx">Counter</span> <span class="o">=</span> <span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">start</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="nx">counter</span> <span class="kd">as </span><span class="kr">any</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span> <span class="p">}</span> <span class="kd">as </span><span class="kr">any</span><span class="p">);</span>
<span class="nx">counter</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_declaration_merging_y_module_augmentation_cuándo_usar">5.9. Declaration merging y module augmentation (cuándo usar)</h3>
<div class="ulist">
<ul>
<li>
<p>Útil para extender tipos de librerías o añadir campos globales (p. ej. <code>Express.Request</code>).</p>
</li>
<li>
<p>Documenta las augmentations y evita cambios inesperados en dependencias.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">declare</span> <span class="kr">module</span> <span class="dl">'</span><span class="s1">express-serve-static-core</span><span class="dl">'</span> <span class="p">{</span>
  <span class="kr">interface</span> <span class="nx">Request</span> <span class="p">{</span> <span class="nl">currentUser</span><span class="p">?:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">role</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_y_anti_patrones">5.10. Buenas prácticas y anti-patrones</h3>
<div class="ulist">
<ul>
<li>
<p>Usa <code>interface</code> para contratos públicos que puedan extenderse; usa <code>type</code> para uniones y composiciones complejas.</p>
</li>
<li>
<p>Mantén DTOs y Entities separados; transforma explícitamente entre ellos.</p>
</li>
<li>
<p>Prefiere <code>Record</code> a index signatures cuando conozcas las claves posibles.</p>
</li>
<li>
<p>Evita tipos excesivamente anidados o condicionales que dificulten la comprensión.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_clase_tarea">5.11. Ejercicios prácticos (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Catálogo de productos:</p>
</li>
<li>
<p>Diseña <code>Product</code>, <code>Variant</code>, <code>Price</code> y un <code>Record&lt;SKU, Variant&gt;</code>; implementa tipos para filtrar variantes por atributos.</p>
</li>
<li>
<p>Ejercicio 2 — Utilities profundas:</p>
</li>
<li>
<p>Implementa <code>DeepReadonly&lt;T&gt;</code> y <code>DeepPartial&lt;T&gt;</code> y escribe tests que demuestren el comportamiento.</p>
</li>
<li>
<p>Ejercicio 3 — DTO → Entity:</p>
</li>
<li>
<p>Crea <code>CreateOrderDTO</code> y <code>OrderEntity</code>; escribe <code>toEntity(dto)</code> con validaciones y type guards.</p>
</li>
<li>
<p>Ejercicio 4 — Augmentación práctica:</p>
</li>
<li>
<p>Añade <code>currentUser</code> a <code>Express.Request</code> y crea un middleware tipado.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_6_clases_y_poo_en_typescript_2h">6. Módulo 6 — Clases y POO en TypeScript (2h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducción_práctica">6.1. Introducción práctica</h3>
<div class="paragraph">
<p>Las <code>class</code> de TypeScript son azúcar sintáctico sobre el prototipo de JavaScript, pero combinadas con el sistema de tipos permiten expresar contratos, encapsular comportamiento y crear patrones reutilizables (factories, repositorios, value objects). En este bloque veremos cómo <strong>construir</strong> clases correctamente y cuándo preferir interfaces o composición.</p>
</div>
</div>
<div class="sect2">
<h3 id="_construyendo_clases_paso_a_paso_sintaxis_y_variantes">6.2. Construyendo clases — paso a paso (sintaxis y variantes)</h3>
<div class="ulist">
<ul>
<li>
<p>Declarar propiedades públicas/privadas con tipos explícitos.</p>
</li>
<li>
<p><code>readonly</code> para propiedades inmutables después de la inicialización.</p>
</li>
<li>
<p>Parameter properties (<code>constructor(public x: T)</code>) crean y asignan la propiedad automáticamente.</p>
</li>
<li>
<p>Inicializadores de propiedad y valores por defecto en el constructor.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>
  <span class="k">readonly</span> <span class="nx">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span>        <span class="c1">// inicializador de propiedad</span>
  <span class="k">private</span> <span class="nx">_age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>                  <span class="c1">// campo privado</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="k">public</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">public</span> <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>                     <span class="c1">// asignación en constructor</span>
  <span class="p">}</span>

  <span class="kd">get</span> <span class="nf">age</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="p">}</span>         <span class="c1">// getter (encapsulación)</span>
  <span class="nf">birthday</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">_age</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>          <span class="c1">// método de instancia</span>
  <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> (</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">)`</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Ejemplo práctico: BankAccount con encapsulación fuerte (campo privado de ECMAScript)</span>
<span class="kd">class</span> <span class="nc">BankAccount</span> <span class="p">{</span>
  <span class="nx">#balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// privado en runtime</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="nx">owner</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{}</span>
  <span class="nf">deposit</span><span class="p">(</span><span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span> <span class="k">if </span><span class="p">(</span><span class="nx">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">amount must be positive</span><span class="dl">'</span><span class="p">);</span> <span class="k">this</span><span class="p">.</span><span class="nx">#balance</span> <span class="o">+=</span> <span class="nx">amount</span> <span class="p">}</span>
  <span class="nf">withdraw</span><span class="p">(</span><span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span> <span class="k">if </span><span class="p">(</span><span class="nx">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">amount must be positive</span><span class="dl">'</span><span class="p">);</span> <span class="k">if </span><span class="p">(</span><span class="nx">amount</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">#balance</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">insufficient funds</span><span class="dl">'</span><span class="p">);</span> <span class="k">this</span><span class="p">.</span><span class="nx">#balance</span> <span class="o">-=</span> <span class="nx">amount</span> <span class="p">}</span>
  <span class="nf">getBalance</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">#balance</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// uso</span>
<span class="kd">const</span> <span class="nx">acc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BankAccount</span><span class="p">(</span><span class="dl">'</span><span class="s1">alice</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">acc</span><span class="p">.</span><span class="nf">deposit</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span> <span class="nx">acc</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span> <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">withdraw failed:</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span> <span class="kd">as </span><span class="nb">Error</span><span class="p">).</span><span class="nx">message</span><span class="p">)</span> <span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">balance =</span><span class="dl">'</span><span class="p">,</span> <span class="nx">acc</span><span class="p">.</span><span class="nf">getBalance</span><span class="p">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Puntos didácticos:
- <code>constructor(public id: string)</code> es equivalente a declarar <code>id</code> y asignarlo en el constructor.
- Prefiere <code>private</code>/<code>readonly</code> para invariantes; usa <code>get</code> para exponer lectura controlada.</p>
</div>
</div>
<div class="sect2">
<h3 id="_interfaces_como_contrato_de_clase_shape_y_implements">6.3. Interfaces como contrato de clase (shape y <code>implements</code>)</h3>
<div class="ulist">
<ul>
<li>
<p><code>interface</code> describe la forma (shape) que una clase debe satisfacer; TypeScript usa <strong>structural typing</strong> (no hace falta <code>implements</code> para comprobar compatibilidad, pero <code>implements</code> documenta intención).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">Identifiable</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kd">class</span> <span class="nc">Entity</span> <span class="k">implements</span> <span class="nx">Identifiable</span> <span class="p">{</span> <span class="nf">constructor</span><span class="p">(</span><span class="k">public</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
<span class="c1">// cualquier objeto con `id: string` es compatible con Identifiable</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cuándo usar <code>interface</code> vs <code>class</code>:
- Usa <code>interface</code> para describir contratos públicos y permitir múltiples implementaciones.
- Usa <code>class</code> cuando necesitas comportamiento en runtime (<code>instanceof</code>), campos privados, o inicialización.</p>
</div>
</div>
<div class="sect2">
<h3 id="_herencia_abstracción_y_polimorfismo_práctica_segura">6.4. Herencia, abstracción y polimorfismo (práctica segura)</h3>
<div class="ulist">
<ul>
<li>
<p><code>extends</code> reutiliza implementación; <code>super(&#8230;&#8203;)</code> llama al constructor padre.</p>
</li>
<li>
<p><code>abstract class</code> define métodos que las subclases deben implementar; útil para plantillas de comportamiento.</p>
</li>
<li>
<p><code>protected</code> para miembros accesibles en subclases pero no desde fuera.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Animal</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="k">public</span> <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{}</span>
  <span class="kd">abstract</span> <span class="nf">speak</span><span class="p">():</span> <span class="kr">string</span><span class="p">;</span>             <span class="c1">// contrato para subclases</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Dog</span> <span class="kd">extends</span> <span class="nc">Animal</span> <span class="p">{</span>
  <span class="nf">speak</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> says woof`</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">announce</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="nx">Animal</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nf">speak</span><span class="p">())</span> <span class="p">}</span> <span class="c1">// polimorfismo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Buenas prácticas con herencia:
- Limita la profundidad de la jerarquía; prefiere composición cuando el comportamiento puede delegarse.
- Usa interfaces para definir contratos y <code>abstract</code> para código compartido con estados/invariantes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_métodos_y_propiedades_estáticas_cuándo_y_cómo_usarlos">6.5. Métodos y propiedades estáticas — cuándo y cómo usarlos</h3>
<div class="ulist">
<ul>
<li>
<p><code>static</code> define miembros en el «lado constructor» (shared across instances). Útiles para constantes, utilidades y fábricas.</p>
</li>
<li>
<p>Evita estado mutable estático en aplicaciones concurridas (produce efectos globales).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">class</span> <span class="nc">MathUtil</span> <span class="p">{</span>
  <span class="k">static</span> <span class="k">readonly</span> <span class="nx">PI</span> <span class="o">=</span> <span class="mf">3.14159</span><span class="p">;</span>
  <span class="k">static</span> <span class="nf">circleArea</span><span class="p">(</span><span class="nx">r</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">MathUtil</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">*</span> <span class="nx">r</span> <span class="p">}</span>
  <span class="k">private</span> <span class="nf">constructor</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// evita instanciación</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">area</span> <span class="o">=</span> <span class="nx">MathUtil</span><span class="p">.</span><span class="nf">circleArea</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Patrón común: <code>static</code> factory</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">class</span> <span class="nc">User</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nf">constructor</span><span class="p">(</span><span class="k">public</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">public</span> <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{}</span>
  <span class="k">static</span> <span class="nf">create</span><span class="p">(</span><span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nc">User</span><span class="p">(</span><span class="nc">String</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">()),</span> <span class="nx">name</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="dl">'</span><span class="s1">Ana</span><span class="dl">'</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uso_práctico_patrones_con_clases_repositorio_value_object_factory">6.6. Uso práctico: patrones con clases (repositorio, value object, factory)</h3>
<div class="ulist">
<ul>
<li>
<p>Repository: encapsula acceso a datos con una API tipada.</p>
</li>
<li>
<p>Value Object: clase pequeña, inmutable y con igualdad por valor (ej.: <code>Email</code>).</p>
</li>
<li>
<p>Factory / DI ligero: fábricas estáticas o inyección por constructor para separar creación y uso.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">class</span> <span class="nc">Email</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="sr">/^</span><span class="se">[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+@</span><span class="se">[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+</span><span class="se">\.[^\s</span><span class="sr">@</span><span class="se">]</span><span class="sr">+$/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email inválido</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nf">equals</span><span class="p">(</span><span class="nx">other</span><span class="p">:</span> <span class="nx">Email</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">other</span><span class="p">.</span><span class="nx">value</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">InMemoryRepo</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">T</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="nf">save</span><span class="p">(</span><span class="na">item</span><span class="p">:</span> <span class="nx">T</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span> <span class="k">return</span> <span class="nx">item</span> <span class="p">}</span>
  <span class="nf">find</span><span class="p">(</span><span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">??</span> <span class="kc">null</span> <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Consejos prácticos:
- Mantén entidades mutables solo donde sea necesario; usa <code>readonly</code> en DTOs y value objects.
- Prefiere métodos de instancia para comportamiento que requiere estado y funciones puras para transformaciones.</p>
</div>
</div>
<div class="sect2">
<h3 id="_errores_comunes_y_antipatterns_con_clases">6.7. Errores comunes y antipatterns con clases</h3>
<div class="ulist">
<ul>
<li>
<p>Jerarquías profundas y uso excesivo de <code>instanceof</code> (rompe extensibilidad).</p>
</li>
<li>
<p>Exponer colecciones mutables (usa <code>readonly</code> o copias defensivas).</p>
</li>
<li>
<p>Abuso de propiedades estáticas con estado mutable (dificulta tests y concurrencia).</p>
</li>
<li>
<p>Olvidar validar invariantes en constructores.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_didácticos_claro_y_aplicable">6.8. Ejercicios didácticos (claro y aplicable)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — <code>BankAccount</code> seguro:</p>
</li>
<li>
<p>Implementa <code>BankAccount</code> con campo privado <code>#balance</code>, métodos <code>deposit</code>/<code>withdraw</code> y <code>getBalance</code>.</p>
</li>
<li>
<p>Añade validaciones (no permitir saldo negativo) y tests.</p>
</li>
<li>
<p>Ejercicio 2 — <code>Email</code> como Value Object:</p>
</li>
<li>
<p>Implementa la clase <code>Email</code> inmutable con validación en constructor y método <code>equals</code>.</p>
</li>
<li>
<p>Ejercicio 3 — Herencia controlada:</p>
</li>
<li>
<p>Crea <code>abstract class Shape { abstract area(): number }</code> y <code>Circle</code>/<code>Rectangle</code> que sobrescriban <code>area</code>.</p>
</li>
<li>
<p>Escribe una función que calcule el área total de <code>Shape[]</code> demostrando polimorfismo.</p>
</li>
<li>
<p>Ejercicio 4 — Factory estático:</p>
</li>
<li>
<p>Implementa <code>User.create(name)</code> que genera un <code>id</code> único y devuelve una instancia tipada.</p>
</li>
</ul>
</div>
<hr>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_7_genéricos_y_utilidades_2h">7. Módulo 7 — Genéricos y utilidades (2h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_qué_son_los_genéricos_intención_pedagógica">7.1. ¿Qué son los genéricos? (intención pedagógica)</h3>
<div class="paragraph">
<p>Los genéricos permiten escribir código que funciona con distintos tipos manteniendo la seguridad del sistema de tipos. Piensa en ellos como <strong>plantillas</strong> para funciones, interfaces o clases que se adaptan al tipo concreto donde se usan.</p>
</div>
</div>
<div class="sect2">
<h3 id="_genéricos_básicos_sintaxis_y_ejemplos">7.2. Genéricos básicos: sintaxis y ejemplos</h3>
<div class="ulist">
<ul>
<li>
<p>Firma genérica: <code>function id&lt;T&gt;(v: T): T</code>.</p>
</li>
<li>
<p>Generics en interfaces y clases para modelar containers/repositories.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">id</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">v</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">v</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">id</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">hola</span><span class="dl">'</span><span class="p">);</span>

<span class="kr">interface</span> <span class="nx">Box</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">T</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">b</span><span class="p">:</span> <span class="nx">Box</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">42</span> <span class="p">};</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_constraints_t_extends_u_y_keyof">7.2.1. Constraints (<code>T extends U</code>) y <code>keyof</code></h4>
<div class="ulist">
<ul>
<li>
<p>Restringe qué tipos son válidos para un parámetro genérico.</p>
</li>
<li>
<p><code>keyof T</code> permite limitar claves válidas y crear helpers tipados.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Contexto: helper genérico que extrae una propiedad con seguridad de tipos.</span>
<span class="kd">function</span> <span class="nf">getProp</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">K</span> <span class="kd">extends</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="nx">key</span><span class="p">:</span> <span class="nx">K</span><span class="p">):</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ana</span><span class="dl">'</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nf">getProp</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// inferred as string</span>

<span class="c1">// uso práctico: crear un pluck reutilizable</span>
<span class="kd">function</span> <span class="nf">pluck</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">K</span> <span class="kd">extends</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arr</span><span class="p">:</span> <span class="nx">T</span><span class="p">[],</span> <span class="nx">key</span><span class="p">:</span> <span class="nx">K</span><span class="p">):</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">][]</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">arr</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">ids</span> <span class="o">=</span> <span class="nf">pluck</span><span class="p">([{</span><span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">},</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">}],</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// string[]</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">ids</span><span class="p">);</span>
<span class="c1">// getProp(user, 'age') // Error: 'age' no existe en user</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parámetros_por_defecto_y_genéricos_condicionales">7.2.2. Parámetros por defecto y genéricos condicionales</h4>
<div class="ulist">
<ul>
<li>
<p>Puedes dar valores por defecto a parámetros genéricos: <code>T = any</code>.</p>
</li>
<li>
<p>Útil para APIs que quieren ser genéricas pero con comportamiento por defecto.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Wrap</span><span class="o">&lt;</span><span class="nx">T</span> <span class="o">=</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">T</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">w</span><span class="p">:</span> <span class="nx">Wrap</span> <span class="o">=</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">x</span><span class="dl">'</span> <span class="p">};</span> <span class="c1">// T = string por defecto</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_patrones_prácticos_con_genéricos">7.3. Patrones prácticos con genéricos</h3>
<div class="ulist">
<ul>
<li>
<p>Repository&lt;T&gt;, Service&lt;T&gt;, Factory&lt;T&gt; y Middleware genéricos son patrones recurrentes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">Repository</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">ID</span> <span class="o">=</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nf">save</span><span class="p">(</span><span class="na">item</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nf">findById</span><span class="p">(</span><span class="na">id</span><span class="p">:</span> <span class="nx">ID</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">InMemoryRepo</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span><span class="o">&gt;</span> <span class="k">implements</span> <span class="nx">Repository</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">T</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="k">async</span> <span class="nf">save</span><span class="p">(</span><span class="na">item</span><span class="p">:</span> <span class="nx">T</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span> <span class="k">return</span> <span class="nx">item</span> <span class="p">}</span>
  <span class="k">async</span> <span class="nf">findById</span><span class="p">(</span><span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">??</span> <span class="kc">null</span> <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_utility_types_built_in_usos_prácticos">7.4. Utility types (built-in) — usos prácticos</h3>
<div class="paragraph">
<p>Breve recordatorio y ejemplos de uso: <code>Partial</code>, <code>Required</code>, <code>Readonly</code>, <code>Pick</code>, <code>Omit</code>, <code>Record</code>, <code>Exclude</code>, <code>Extract</code>, <code>NonNullable</code>, <code>ReturnType</code>, <code>InstanceType</code>, <code>Parameters</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">password</span><span class="p">?:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="kd">type</span> <span class="nx">PublicUser</span> <span class="o">=</span> <span class="nb">Omit</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">,</span> <span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">UpdateUser</span> <span class="o">=</span> <span class="nb">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">makePublic</span><span class="p">(</span><span class="nx">u</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nx">PublicUser</span> <span class="p">{</span> <span class="kd">const</span> <span class="p">{</span> <span class="nx">password</span><span class="p">,</span> <span class="p">...</span><span class="nx">p</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span> <span class="k">return</span> <span class="nx">p</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conditional_types_y_infer_explicación_y_ejemplos">7.5. Conditional types y <code>infer</code> — explicación y ejemplos</h3>
<div class="ulist">
<ul>
<li>
<p>Conditional types: <code>T extends U ? X : Y</code> permiten crear transformaciones de tipos.</p>
</li>
<li>
<p><code>infer</code> extrae tipos intermedios (ej.: extraer el tipo resuelto de una Promise).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Flatten&lt;T&gt;</span>
<span class="kd">type</span> <span class="nx">Flatten</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="kd">extends</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">infer</span> <span class="nx">U</span><span class="o">&gt;</span> <span class="p">?</span> <span class="nx">U</span> <span class="p">:</span> <span class="nx">T</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">Flatten</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// string</span>

<span class="kd">type</span> <span class="nx">UnwrapPromise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="kd">extends</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">infer</span> <span class="nx">U</span><span class="o">&gt;</span> <span class="p">?</span> <span class="nx">U</span> <span class="p">:</span> <span class="nx">T</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">R</span> <span class="o">=</span> <span class="nx">UnwrapPromise</span><span class="o">&lt;</span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;&gt;</span><span class="p">;</span> <span class="c1">// number</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_deepreadonly_ejemplo_recursivo">7.5.1. DeepReadonly (ejemplo recursivo)</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">DeepReadonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="kd">extends</span> <span class="nb">Function</span> <span class="p">?</span> <span class="nx">T</span> <span class="p">:</span> <span class="nx">T</span> <span class="kd">extends</span> <span class="nx">object</span> <span class="p">?</span> <span class="p">{</span> <span class="k">readonly</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="p">]:</span> <span class="nx">DeepReadonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span><span class="o">&gt;</span> <span class="p">}</span> <span class="p">:</span> <span class="nx">T</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">X</span> <span class="o">=</span> <span class="nx">DeepReadonly</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span> <span class="p">}</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// { readonly a: { readonly b: string } }</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplos_avanzados_de_tipos_utilitarios">7.6. Ejemplos avanzados de tipos utilitarios</h3>
<div class="ulist">
<ul>
<li>
<p>Extraer claves por valor: <code>KeysWithType&lt;T, V&gt;</code> usando mapped + conditional types.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">KeysWithType</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">V</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="p">]:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="kd">extends</span> <span class="nx">V</span> <span class="p">?</span> <span class="nx">K</span> <span class="p">:</span> <span class="nx">never</span> <span class="p">}[</span><span class="kr">keyof</span> <span class="nx">T</span><span class="p">];</span>
<span class="kd">type</span> <span class="nx">StringKeysOf</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">KeysWithType</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="kr">string</span><span class="o">&gt;</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aplicaciones_prácticas_helpers_y_validadores">7.7. Aplicaciones prácticas (helpers y validadores)</h3>
<div class="ulist">
<ul>
<li>
<p><code>Validator&lt;T&gt;</code> genérico para formularios y validación runtime con tipos que describen el shape aceptado.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">Validator</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">T</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">isString</span><span class="p">:</span> <span class="nx">Validator</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">v</span><span class="p">):</span> <span class="nx">v</span> <span class="k">is</span> <span class="kr">string</span> <span class="o">=&gt;</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">validate</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">v</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">,</span> <span class="nx">guard</span><span class="p">:</span> <span class="nx">Validator</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">T</span> <span class="p">{</span> <span class="k">if </span><span class="p">(</span><span class="nf">guard</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span> <span class="k">return</span> <span class="nx">v</span><span class="p">;</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_con_genéricos">7.8. Buenas prácticas con genéricos</h3>
<div class="ulist">
<ul>
<li>
<p>Nombra parámetros genéricos con sentido (<code>T</code>, <code>K</code>, <code>V</code>, <code>R</code> o más descriptivos en APIs públicas).</p>
</li>
<li>
<p>Mantén la aridad baja: demasiados parámetros genéricos hacen la API dura de usar.</p>
</li>
<li>
<p>Documenta la semántica de los parámetros genéricos en la API pública.</p>
</li>
<li>
<p>Evita exponer tipos de implementación complejos en la superficie pública.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_propuestos_clase_tarea">7.9. Ejercicios propuestos (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Implementa <code>Flatten&lt;T&gt;</code> y añade tests que demuestren comportamiento con arrays y no-arrays.</p>
</li>
<li>
<p>Ejercicio 2 — Crea <code>DeepReadonly&lt;T&gt;</code> y escribe ejemplos donde la mutación falle en tiempo de compilación.</p>
</li>
<li>
<p>Ejercicio 3 — Diseña <code>Repository&lt;T&gt;</code> genérico y una implementación <code>InMemoryRepo&lt;T&gt;</code> con tests.</p>
</li>
<li>
<p>Ejercicio 4 — Implementa <code>Validator&lt;T&gt;</code> y un helper <code>validateForm&lt;T&gt;(data: unknown, validators: Record&lt;keyof T, Validator&lt;any&gt;&gt;): T</code>.</p>
</li>
<li>
<p>Ejercicio 5 — Escribe un <code>EventEmitter&lt;Events&gt;</code> tipado donde <code>Events</code> sea un map <code>eventName &#8594; payloadType</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_8_tipos_avanzados_y_patterns_2h">8. Módulo 8 — Tipos avanzados y patterns (2h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_discriminated_unions_y_type_guards_conceptos_y_práctica">8.1. Discriminated unions y type guards (conceptos y práctica)</h3>
<div class="ulist">
<ul>
<li>
<p>Las <strong>discriminated unions</strong> combinan un <strong>tag</strong> (<code>kind</code>/<code>type</code>) con variantes tipadas; son la forma más segura y legible para modelar estados y eventos.</p>
</li>
<li>
<p>Usa <code>switch</code> exhaustivo + <code>never</code> para forzar comprobación en tiempo de compilación cuando se añadan variantes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Discriminated union + exhaustive check</span>
<span class="kd">type</span> <span class="nx">Event</span> <span class="o">=</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">;</span> <span class="nl">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">y</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">;</span> <span class="nl">key</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span>

<span class="kd">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">e</span><span class="p">:</span> <span class="nx">Event</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="s2">`click at </span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">x</span><span class="p">}</span><span class="s2">,</span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">y</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="s2">`key </span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="na">_exhaustive</span><span class="p">:</span> <span class="nx">never</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span> <span class="c1">// error si hay un nuevo variant sin case</span>
      <span class="k">return</span> <span class="nx">_exhaustive</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_user_defined_type_guards_y_asserts">8.1.1. User-defined type guards y <code>asserts</code></h4>
<div class="ulist">
<ul>
<li>
<p>Declara funciones <code>x is T</code> para estrechar tipos en runtime.</p>
</li>
<li>
<p>Usa <code>asserts</code> para lanzar errores cuando la validación es necesaria y garantizar al compilador el tipo resultante.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">function</span> <span class="nf">isKeypress</span><span class="p">(</span><span class="nx">e</span><span class="p">:</span> <span class="nx">Event</span><span class="p">):</span> <span class="nx">e</span> <span class="k">is</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">;</span> <span class="nl">key</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">ensureKeypress</span><span class="p">(</span><span class="nx">e</span><span class="p">:</span> <span class="nx">Event</span><span class="p">):</span> <span class="nx">asserts</span> <span class="nx">e</span> <span class="k">is</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">;</span> <span class="nl">key</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="kd">type</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">not keypress</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapped_conditional_template_literal_types_potencia_tipada">8.2. Mapped / Conditional / Template literal types (potencia tipada)</h3>
<div class="ulist">
<ul>
<li>
<p>Mapped types: transforman propiedades de un tipo (ej.: <code>Partial</code>, <code>Readonly</code>).</p>
</li>
<li>
<p>Conditional types + <code>infer</code>: permiten extraer o transformar fragmentos de tipo.</p>
</li>
<li>
<p>Template literal types: manipulan cadenas a nivel de tipo (ej.: generar claves, unir strings).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// key remapping: prefix</span>
<span class="kd">type</span> <span class="nx">Props</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">Prefixed</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">Props</span> <span class="kd">as </span><span class="s2">`data-</span><span class="p">${</span><span class="nx">K</span> <span class="o">&amp;</span> <span class="kr">string</span><span class="p">}</span><span class="s2">`</span><span class="p">]:</span> <span class="nx">Props</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="p">};</span>
<span class="c1">// { 'data-id': number; 'data-name': string }</span>

<span class="c1">// template literal types: crear eventos</span>
<span class="kd">type</span> <span class="nx">Evt</span><span class="o">&lt;</span><span class="nx">E</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">E</span><span class="p">}</span><span class="s2">_EVENT`</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">LoginEvt</span> <span class="o">=</span> <span class="nx">Evt</span><span class="o">&lt;</span><span class="dl">'</span><span class="s1">USER_LOGIN</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// 'USER_LOGIN_EVENT'</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_branded_nominal_typing_cuando_lo_necesitas">8.3. Branded / Nominal typing (cuando lo necesitas)</h3>
<div class="ulist">
<ul>
<li>
<p>Branding: crea tipos nominales a partir de primitivos para evitar mezclas accidentales (ej.: <code>UserId</code> ≠ <code>OrderId</code>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// Contexto: branding nominal para evitar mezclar distintos IDs en tiempo de compilación.</span>
<span class="kd">type</span> <span class="nx">Brand</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span> <span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">K</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">__brand</span><span class="p">:</span> <span class="nx">T</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">UserId</span> <span class="o">=</span> <span class="nx">Brand</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UserId</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nf">makeUserId</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">UserId</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">s</span> <span class="kd">as </span><span class="nx">UserId</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nf">getUserById</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">UserId</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">raw</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">abc</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// getUserById(raw) // Error en compilación: string no es UserId</span>
<span class="kd">const</span> <span class="nx">uid</span> <span class="o">=</span> <span class="nf">makeUserId</span><span class="p">(</span><span class="dl">'</span><span class="s1">abc</span><span class="dl">'</span><span class="p">);</span>
<span class="nf">getUserById</span><span class="p">(</span><span class="nx">uid</span><span class="p">);</span> <span class="c1">// OK</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metaprogramación_de_tipos_técnicas_comunes">8.4. Metaprogramación de tipos (técnicas comunes)</h3>
<div class="ulist">
<ul>
<li>
<p>Combina mapped + conditional + template literal types para crear utilidades (p. ej. <code>DeepReadonly</code>, <code>PickByValue</code>, <code>SnakeToCamel</code>).</p>
</li>
<li>
<p>Ten en cuenta el coste en <code>tsc</code>/<code>tsserver</code>: tipos excesivamente complejos ralentizan el proyecto.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// ejemplo: extraer propiedades por tipo</span>
<span class="kd">type</span> <span class="nx">PickByValue</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">V</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span> <span class="kd">as </span><span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="kd">extends</span> <span class="nx">V</span> <span class="p">?</span> <span class="nx">K</span> <span class="p">:</span> <span class="nx">never</span><span class="p">]:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_y_advertencias">8.5. Buenas prácticas y advertencias</h3>
<div class="ulist">
<ul>
<li>
<p>Documenta las utilidades complejas y limita su uso a la capa de tipos (no en la superficie pública si confunde al consumidor).</p>
</li>
<li>
<p>Comprueba el coste de compilación al introducir metaprogramación de tipos; prefiera claridad sobre cleverness.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_avanzados_clase_tarea">8.6. Ejercicios avanzados (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Eventos tipados: modela un <code>Event</code> discriminado (Click/Keypress/Submit) y escribe un handler exhaustivo con <code>never</code>.</p>
</li>
<li>
<p>Ejercicio 2 — Guard avanzado: implementa <code>isValidUser(x: unknown): x is User</code> con validaciones runtime y tests.</p>
</li>
<li>
<p>Ejercicio 3 — SnakeCase → camelCase (tipos): crea <code>SnakeToCamel&lt;S&gt;</code> y tipa una función <code>camelize&lt;T&gt;(obj: T): SnakeToCamel&lt;T&gt;</code> (centrarse en el tipado).</p>
</li>
<li>
<p>Ejercicio 4 — Branded IDs: implementa <code>UserId</code>/<code>OrderId</code> y demuestra no-compatibilidad en compilación.</p>
</li>
<li>
<p>Ejercicio 5 — Utilities metaprogramadas: implementa <code>PickByValue&lt;T, V&gt;</code> y úsalo en un ejemplo real.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_modelar_sistema_de_eventos_y_handlers_tipados">8.6.1. modelar sistema de eventos y handlers tipados</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_9_módulos_declaration_files_y_resolución_1_5h">9. Módulo 9 — Módulos, declaration files y resolución (1.5h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sistemas_de_módulos_y_empaquetado_esm_vs_commonjs">9.1. Sistemas de módulos y empaquetado (ESM vs CommonJS)</h3>
<div class="ulist">
<ul>
<li>
<p>Diferencia clave: ESM usa <code>import</code>/<code>export</code> estático; CommonJS usa <code>require</code>/<code>module.exports</code> en runtime.</p>
</li>
<li>
<p><code>package.json</code> controla cómo Node interpreta los archivos (<code>"type": "module"</code> para ESM).</p>
</li>
<li>
<p><code>esModuleInterop</code> / <code>allowSyntheticDefaultImports</code> en <code>tsconfig</code> facilitan interop entre ambos sistemas.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// ESM</span>
<span class="k">import</span> <span class="nx">foo</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">lib</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// CommonJS</span>
<span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">lib</span><span class="dl">'</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mi-paquete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist/index.cjs.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist/index.esm.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"types"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist/index.d.ts"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"module"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_declaration_files_d_ts_y_packaging_de_tipos">9.2. Declaration files (<code>.d.ts</code>) y packaging de tipos</h3>
<div class="ulist">
<ul>
<li>
<p><code>declaration: true</code> en <code>tsconfig</code> genera <code>.d.ts</code> junto al <code>.js</code> cuando compilas.</p>
</li>
<li>
<p>Campo <code>types</code> en <code>package.json</code> apunta al fichero de tipos público (p. ej. <code>dist/index.d.ts</code>).</p>
</li>
<li>
<p><code>declarationMap</code> ayuda a depurar paquetes tipados (mapea <code>.d.ts</code> a <code>.ts</code> fuente).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>generar solo declaraciones
<span class="go">tsc -p tsconfig.json --emitDeclarationOnly
</span><span class="gp">#</span><span class="w"> </span>compilar librería y revisar contenido del paquete
<span class="go">npm pack &amp;&amp; tar -tf *.tgz | grep dist</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo_mínimo_de_d_ts_para_una_librería_js">9.3. Ejemplo mínimo de <code>.d.ts</code> para una librería JS</h3>
<div class="paragraph">
<p>Contexto: ambient declaration para una librería JS sin tipos; colócalo en <code>types/</code> y añádelo en <code>tsconfig</code> si es necesario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// types/legacy-lib.d.ts</span>
<span class="kr">declare</span> <span class="kr">module</span> <span class="dl">'</span><span class="s1">legacy-lib</span><span class="dl">'</span> <span class="p">{</span>
  <span class="k">export</span> <span class="kd">function</span> <span class="nf">legacy</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">export</span> <span class="kr">interface</span> <span class="nx">Options</span> <span class="p">{</span> <span class="nl">verbose</span><span class="p">?:</span> <span class="nx">boolean</span> <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">version</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">export</span> <span class="k">default</span> <span class="nx">legacy</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// uso desde TypeScript (src/consumer.ts)</span>
<span class="k">import</span> <span class="nx">legacy</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Options</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">legacy-lib</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">r</span> <span class="o">=</span> <span class="nf">legacy</span><span class="p">({});</span> <span class="c1">// tipado disponible gracias a types/legacy-lib.d.ts</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ambient_declarations_y_module_augmentation">9.4. Ambient declarations y module augmentation</h3>
<div class="ulist">
<ul>
<li>
<p><code>declare module 'x' {}</code> se usa cuando una dependencia no tiene tipos.</p>
</li>
<li>
<p>Module augmentation (<code>declare module 'express-serve-static-core' { interface Request { user?: User } }</code>) permite añadir propiedades a tipos externos.</p>
</li>
<li>
<p><code>declare global { interface Window { <em>APP_VERSION</em>?: string } }</code> extiende el ambito global.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// añadir currentUser a Express Request</span>
<span class="kr">declare</span> <span class="kr">module</span> <span class="dl">'</span><span class="s1">express-serve-static-core</span><span class="dl">'</span> <span class="p">{</span>
  <span class="kr">interface</span> <span class="nx">Request</span> <span class="p">{</span> <span class="nl">currentUser</span><span class="p">?:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">role</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_path_mapping_y_resolución_práctica_baseurl_paths">9.5. Path mapping y resolución práctica (baseUrl / paths)</h3>
<div class="ulist">
<ul>
<li>
<p><code>baseUrl</code> y <code>paths</code> simplifican imports (<code>@app/* &#8594; src/*</code>).</p>
</li>
<li>
<p>IMPORTANTE: sincronizar <code>paths</code> con bundler (Vite/webpack) y con test runners (Jest/Vitest) para evitar errores en runtime.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"@app/*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/*"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// vite.config.ts (alias)</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vite</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">path</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="nf">defineConfig</span><span class="p">({</span> <span class="na">resolve</span><span class="p">:</span> <span class="p">{</span> <span class="na">alias</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">@app</span><span class="dl">'</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nf">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">src</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_publicar_paquetes_con_tipos_checklist">9.6. Publicar paquetes con tipos (checklist)</h3>
<div class="ulist">
<ul>
<li>
<p>Activar <code>declaration: true</code> y <code>declarationMap</code> si necesitas mapear tipos al fuente.</p>
</li>
<li>
<p>Asegurar <code>types</code> en <code>package.json</code> y que los <code>.d.ts</code> estén incluidos en <code>files</code> o <code>npm pack</code>.</p>
</li>
<li>
<p>Considerar <code>typesVersions</code> para orientar a consumidores con diferentes versiones de TS.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dist"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"types"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist/index.d.ts"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"typesVersions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"*"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"./*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dist/*"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resolución_de_problemas_comunes_y_comandos_útiles">9.7. Resolución de problemas comunes y comandos útiles</h3>
<div class="ulist">
<ul>
<li>
<p>Error "Could not find a declaration file for module 'x'" → instalar <code>@types/x</code> o crear <code>declare module 'x'</code>.</p>
</li>
<li>
<p>Ver cómo TypeScript resuelve un import: <code>tsc --traceResolution</code>.</p>
</li>
<li>
<p>Inspeccionar paquete publicado: <code>npm pack</code> + <code>tar -tf</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">npx tsc --traceResolution src/index.ts
npx tsc -p tsconfig.json --showConfig
npm pack &amp;&amp; tar -tf mi-paquete-*.tgz | grep ".d.ts\|index.js"</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_publicación_y_compatibilidad">9.8. Buenas prácticas (publicación y compatibilidad)</h3>
<div class="ulist">
<ul>
<li>
<p>Publica tanto <code>main</code> (CommonJS) como <code>module</code> (ESM) si soportas ambos entornos.</p>
</li>
<li>
<p>Incluye <code>types</code> y prueba la consumición desde un proyecto TypeScript limpio.</p>
</li>
<li>
<p>Evita <code>allowJs</code> en paquetes; prefiere publicar definiciones claras.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_clase_tarea_2">9.9. Ejercicios prácticos (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Escribir <code>.d.ts</code> para una dependencia JS:</p>
</li>
<li>
<p>Crea <code>types/legacy-lib.d.ts</code>, añade la referencia en <code>tsconfig</code> y consume la librería desde TS.</p>
</li>
<li>
<p>Ejercicio 2 — Publicar paquete con tipos:</p>
</li>
<li>
<p>Configura <code>declaration: true</code>, añade <code>types</code> en <code>package.json</code> y usa <code>npm pack</code> para validar el <code>.tgz</code>.</p>
</li>
<li>
<p>Ejercicio 3 — Configurar alias en dev/prod/tests:</p>
</li>
<li>
<p>Añade <code>paths</code> en <code>tsconfig</code>, alias en <code>vite.config.ts</code> y <code>moduleNameMapper</code> en <code>jest</code>.</p>
</li>
<li>
<p>Ejercicio 4 — Module augmentation:</p>
</li>
<li>
<p>Extiende <code>Express.Request</code> con <code>currentUser</code> y escribe un middleware tipado que lo setee.</p>
</li>
<li>
<p>Ejercicio 5 — Diagnóstico:</p>
</li>
<li>
<p>Usa <code>tsc --traceResolution</code> para resolver un fallo de import y documenta la solución aplicada.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_10_tooling_linting_y_testing_1_5h">10. Módulo 10 — Tooling, linting y testing (1.5h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_eslint_y_calidad_de_código">10.1. ESLint y calidad de código</h3>
<div class="sect3">
<h4 id="_typescript_eslint_reglas_esenciales_y_configuración">10.1.1. <code>@typescript-eslint</code>, reglas esenciales y configuración</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_10_tooling_linting_y_testing_1_5h_2">11. Módulo 10 — Tooling, linting y testing (1.5h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_eslint_y_calidad_de_código_2">11.1. ESLint y calidad de código</h3>
<div class="ulist">
<ul>
<li>
<p>ESLint + <code>@typescript-eslint</code> es la combinación estándar para mantener consistencia y encontrar anti-patterns estáticos.</p>
</li>
<li>
<p>Objetivo: detectar errores lógicos, enforcing de convenciones y prevenir regresiones antes de ejecutar código.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_configuración_mínima_ejemplo">11.1.1. Configuración mínima (ejemplo)</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"root"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"@typescript-eslint/parser"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"@typescript-eslint"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"extends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"eslint:recommended"</span><span class="p">,</span><span class="w"> </span><span class="s2">"plugin:@typescript-eslint/recommended"</span><span class="p">,</span><span class="w"> </span><span class="s2">"prettier"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reglas_recomendadas_a_activar">11.1.2. Reglas recomendadas a activar</h4>
<div class="ulist">
<ul>
<li>
<p><code>@typescript-eslint/no-unused-vars</code>, <code>@typescript-eslint/explicit-function-return-type</code> (opcional), <code>no-implicit-globals</code>.</p>
</li>
<li>
<p><code>max-warnings=0</code> en CI para impedir merges con warnings.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_integración_prettier_lint_staged">11.1.3. Integración Prettier + lint-staged</h4>
<div class="ulist">
<ul>
<li>
<p>Usa Prettier para formateo automático y <code>lint-staged</code> para ejecutar ESLint/Prettier en pre-commit.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="nl">"lint-staged"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"src/**/*.{ts,tsx,js,json,md}"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"prettier --write"</span><span class="p">,</span><span class="w"> </span><span class="s2">"eslint --fix"</span><span class="p">]}}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_tipado_qué_por_qué_y_cómo">11.2. Testing tipado (qué, por qué y cómo)</h3>
<div class="ulist">
<ul>
<li>
<p>Testing tipado asegura que las pruebas y mocks respetan tipos; facilita refactors.</p>
</li>
<li>
<p>Herramientas: <code>vitest</code> (rápido, ESM-friendly), <code>jest</code> + <code>ts-jest</code> (maduro, compatibilidad amplia).</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_vitest_configuración_y_ejemplo">11.2.1. Vitest — configuración y ejemplo</h4>
<div class="paragraph">
<p>Contexto: configuración mínima de <code>vitest</code> para Node y ejemplos de tests síncrono y asíncrono.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// vitest.config.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vitest/config</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="nf">defineConfig</span><span class="p">({</span> <span class="na">test</span><span class="p">:</span> <span class="p">{</span> <span class="na">globals</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">environment</span><span class="p">:</span> <span class="dl">'</span><span class="s1">node</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>

<span class="c1">// sample.test.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">describe</span><span class="p">,</span> <span class="nx">it</span><span class="p">,</span> <span class="nx">expect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vitest</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">sum</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./sum</span><span class="dl">'</span><span class="p">;</span>

<span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">suma</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">expect</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)).</span><span class="nf">toBe</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>

<span class="c1">// async example</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">fetchNumber</span><span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">42</span> <span class="p">}</span>
<span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">async ejemplo</span><span class="dl">'</span><span class="p">,</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nf">expect</span><span class="p">(</span><span class="k">await</span> <span class="nf">fetchNumber</span><span class="p">()).</span><span class="nf">toBe</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span> <span class="p">});</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jest_ts_jest_cuando_usarlo">11.2.2. Jest + ts-jest (cuando usarlo)</h4>
<div class="ulist">
<ul>
<li>
<p>Usa <code>ts-jest</code> si dependes de ecosistemas, snapshots o migraciones desde Jest.</p>
</li>
<li>
<p>Configuración ESM requiere ajustes adicionales (<code>transform: { '^.+\\.ts$': 'ts-jest' }</code>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_estrategias_de_mocking_y_pruebas_unitarias_tipadas">11.3. Estrategias de mocking y pruebas unitarias tipadas</h3>
<div class="ulist">
<ul>
<li>
<p>Prefiere inyección de dependencias y <code>vi.fn()</code> / <code>jest.fn()</code> con tipos genéricos.</p>
</li>
<li>
<p>Testea comportamiento (contratos) y no implementaciones privadas.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bundlers_builds_y_source_maps_práctico">11.4. Bundlers, builds y source maps (práctico)</h3>
<div class="ulist">
<ul>
<li>
<p>Herramientas: <code>esbuild</code> (rápido, CLI), <code>vite</code> (dev server), <code>rollup</code>/<code>webpack</code> (producción, plugins).</p>
</li>
<li>
<p>Los bundlers no reemplazan la comprobación de tipos: ejecutar siempre <code>tsc --noEmit</code> en CI.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>ejemplo esbuild <span class="o">(</span>build rápido<span class="o">)</span>
<span class="go">esbuild src/index.ts --bundle --platform=node --outfile=dist/index.js --sourcemap</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_source_maps_y_debugging">11.4.1. Source maps y debugging</h4>
<div class="ulist">
<ul>
<li>
<p>Habilita <code>sourceMap: true</code> en <code>tsconfig</code> y configura el bundler para mantener sourcemaps.</p>
</li>
<li>
<p>Para librerías publica <code>declarationMap: true</code> para mapear <code>.d.ts</code> a fuentes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cicd_y_type_check_en_pipelines_recomendaciones">11.5. CI/CD y type-check en pipelines (recomendaciones)</h3>
<div class="ulist">
<ul>
<li>
<p>Pipeline mínimo: install → type-check (<code>tsc --noEmit</code>) → lint → test → build.</p>
</li>
<li>
<p>Cachea <code>node_modules</code> y <code>.tsbuildinfo</code> para acelerar builds incrementales en monorepos.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_ejemplo_github_actions_esqueleto">11.5.1. Ejemplo GitHub Actions (esqueleto)</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">name</span><span class="pi">:</span> <span class="s">CI</span>
<span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">,</span> <span class="nv">pull_request</span><span class="pi">]</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">ci</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v4</span>
        <span class="na">with</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">node-version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">18'</span> <span class="pi">}</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm ci</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm run type-check</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm run lint</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm test</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm run build</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scripts_recomendados_en_package_json">11.6. Scripts recomendados en <code>package.json</code></h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -p ."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type-check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc --noEmit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eslint 'src/**/*.{ts,tsx}' --max-warnings=0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vitest"</span><span class="w">
</span><span class="p">}}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_diagnóstico_y_comandos_útiles_2">11.7. Diagnóstico y comandos útiles</h3>
<div class="ulist">
<ul>
<li>
<p><code>tsc --noEmit</code> — validar tipos sin generar artefactos.</p>
</li>
<li>
<p><code>eslint src --ext .ts,.tsx</code> — linting.</p>
</li>
<li>
<p><code>vitest --run</code> o <code>jest --ci</code> — ejecutar tests en CI.</p>
</li>
<li>
<p><code>tsc --traceResolution</code> — resolver problemas de imports/paths.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rendimiento_y_caching">11.8. Rendimiento y caching</h3>
<div class="ulist">
<ul>
<li>
<p>Usa <code>--incremental</code> y <code>.tsbuildinfo</code> para compilar más rápido.</p>
</li>
<li>
<p>CI: cachea <code>.tsbuildinfo</code> junto a <code>node_modules</code> cuando sea apropiado.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_y_antipatterns_2">11.9. Buenas prácticas y antipatterns</h3>
<div class="ulist">
<ul>
<li>
<p>No confiar únicamente en pruebas: combina <code>type-check</code> + lint + tests. ✅</p>
</li>
<li>
<p>Evita reglas ESLint que solo aplican a estilos personales sin consenso del equipo. ⚠️</p>
</li>
<li>
<p>Mantén tests rápidos y deterministas; separa e2e del unit/integ.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_clase_tarea_3">11.10. Ejercicios prácticos (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1: Añadir <code>eslint</code> + <code>prettier</code> a un proyecto y configurar <code>lint-staged</code> con <code>husky</code>.</p>
</li>
<li>
<p>Ejercicio 2: Configurar <code>vitest</code>, escribir tests para un módulo y ejecutar en CI.</p>
</li>
<li>
<p>Ejercicio 3: Añadir <code>tsc --noEmit</code> al pipeline de CI y configurar cache para <code>.tsbuildinfo</code>.</p>
</li>
<li>
<p>Ejercicio 4: Comparar tiempo de build entre <code>tsc</code> y <code>esbuild</code> para un ejemplo y documentar conclusiones.</p>
</li>
<li>
<p>Ejercicio 5: Crear un workflow de GitHub Actions que ejecute <code>type-check</code>, <code>lint</code>, <code>test</code> y build (comprobar caché).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_11_integración_práctica_frontend_y_backend_1_5h">12. Módulo 11 — Integración práctica: Frontend y Backend (1.5h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_contexto_práctico">12.1. Contexto práctico</h3>
<div class="paragraph">
<p>Este módulo muestra cómo aplicar TypeScript en un flujo real: definir contratos compartidos, validar entradas en el backend y consumir APIs desde un frontend tipado. Reducirás errores de integración y mejorarás el feedback en tiempo de compilación.</p>
</div>
</div>
<div class="sect2">
<h3 id="_react_componentes_hooks_y_patterns_tipados">12.2. React: componentes, hooks y patterns tipados</h3>
<div class="sect3">
<h4 id="_props_y_componentes_funcionales">12.2.1. Props y componentes funcionales</h4>
<div class="ulist">
<ul>
<li>
<p>Tipar <code>props</code> ayuda a detectar cambios en la API del componente y mejora la experiencia en el editor.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>// Contexto: componente React sencillo que recibe un `User` tipado desde props.
// src/components/UserCard.tsx
import React from 'react';

type User = { id: string; name: string; email?: string };
export function UserCard({ user }: { user: User }) {
  return &lt;div&gt;{user.name}{user.email ? ` (${user.email})` : ''}&lt;/div&gt;;
}

// Uso en un componente padre
export function App() {
  const u: User = { id: '1', name: 'Ana', email: 'a@x.com' };
  return &lt;UserCard user={u} /&gt;;
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_usestate_usereducer_con_genéricos">12.2.2. useState / useReducer con genéricos</h4>
<div class="ulist">
<ul>
<li>
<p>Usa <code>useState&lt;T&gt;</code> y <code>useReducer&lt;S, A&gt;</code> para conservar la inferencia y hacer explícitos los contratos de estado.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>const [user, setUser] = useState&lt;User | null&gt;(null);

type State = { loading: boolean; data?: User };
type Action = { type: 'start' } | { type: 'done'; payload: User };
const reducer: Reducer&lt;State, Action&gt; = (s, a) =&gt; {
  switch (a.type) {
    case 'start': return { loading: true };
    case 'done': return { loading: false, data: a.payload };
  }
};</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_refs_forwardref_y_eventos">12.2.3. Refs, forwardRef y eventos</h4>
<div class="ulist">
<ul>
<li>
<p>Tipar <code>useRef&lt;HTMLInputElement | null&gt;</code> y formularios (<code>React.FormEvent&lt;HTMLFormElement&gt;</code>) evita errores comunes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>const inputRef = useRef&lt;HTMLInputElement | null&gt;(null);
const FancyInput = forwardRef&lt;HTMLInputElement, { value: string }&gt;((props, ref) =&gt; (
  &lt;input ref={ref} defaultValue={props.value} /&gt;
));</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hooks_personalizados_para_llamadas_tipadas">12.2.4. Hooks personalizados para llamadas tipadas</h4>
<div class="ulist">
<ul>
<li>
<p>Encapsula llamadas HTTP en hooks genéricos (<code>apiGet&lt;T&gt;</code>) para propagar tipos al componente consumidor.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>async function apiGet&lt;T&gt;(url: string): Promise&lt;T&gt; {
  const res = await fetch(url);
  if (!res.ok) throw new Error(res.statusText);
  return res.json() as Promise&lt;T&gt;;
}

function useApiUser(id: string) {
  const [user, setUser] = useState&lt;User | null&gt;(null);
  useEffect(() =&gt; { apiGet&lt;User&gt;(`/api/users/${id}`).then(setUser).catch(console.error); }, [id]);
  return user;
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backend_tipado_validación_y_errores">12.3. Backend: tipado, validación y errores</h3>
<div class="sect3">
<h4 id="_dtos_y_validación_en_runtime_zod">12.3.1. DTOs y validación en runtime (zod)</h4>
<div class="ulist">
<ul>
<li>
<p>Aunque TS da seguridad en compile-time, validar entradas en runtime es obligatorio. <code>zod</code> permite declarar schemas y derivar tipos con <code>z.infer</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>import { z } from 'zod';
const CreateUser = z.object({ name: z.string().min(1), email: z.string().email().optional() });
type CreateUserDTO = z.infer&lt;typeof CreateUser&gt;;
type User = { id: string; name: string; email?: string };</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ruta_express_tipada_requestresponse_generics">12.3.2. Ruta Express tipada (Request/Response generics)</h4>
<div class="ulist">
<ul>
<li>
<p>Tipar parámetros, body y respuesta mejora la seguridad en handlers y middlewares.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>// Contexto: servidor Express minimal con validación `zod` y almacenamiento en memoria.
import express, { Request, Response } from 'express';
import { z } from 'zod';

const app = express();
app.use(express.json());

const CreateUser = z.object({ name: z.string().min(1), email: z.string().email().optional() });
type CreateUserDTO = z.infer&lt;typeof CreateUser&gt;;

type User = { id: string; name: string; email?: string };
const db: User[] = [];

app.post('/api/users', (req: Request&lt;{}, {}, CreateUserDTO&gt;, res: Response&lt;User | { error: string }&gt;) =&gt; {
  const parsed = CreateUser.safeParse(req.body);
  if (!parsed.success) return res.status(400).json({ error: parsed.error.message });
  const user: User = { id: String(Date.now()), ...parsed.data };
  db.push(user);
  return res.status(201).json(user);
});

app.get('/api/users', (_req, res) =&gt; res.json(db));

app.listen(3000, () =&gt; console.log('server running on http://localhost:3000'));</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_manejo_de_errores_y_middlewares_tipados">12.3.3. Manejo de errores y middlewares tipados</h4>
<div class="ulist">
<ul>
<li>
<p>Define una forma estándar para errores (p. ej. <code>{ message: string; code?: string }</code>) y tipa el middleware de error para generar respuestas coherentes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compartir_tipos_y_contratos">12.4. Compartir tipos y contratos</h3>
<div class="sect3">
<h4 id="_estrategias_de_compartición">12.4.1. Estrategias de compartición</h4>
<div class="ulist">
<ul>
<li>
<p>Paquete <code>packages/shared</code> (monorepo) que exporta DTOs y tipos públicos.</p>
</li>
<li>
<p><code>paths</code> en <code>tsconfig</code> para alias locales cuando no hay monorepo.</p>
</li>
<li>
<p>Generar tipos desde OpenAPI/GraphQL para evitar divergencias.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w"> </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w"> </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"@shared/*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"packages/shared/src/*"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_openapi_types_comando_práctico">12.4.2. OpenAPI → types (comando práctico)</h4>
<div class="ulist">
<ul>
<li>
<p>Generar tipos: <code>npx openapi-typescript openapi.yaml --output src/types/api-types.ts</code>.</p>
</li>
<li>
<p>Ventaja: el cliente y el servidor comparten la misma especificación.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_versionado_y_compatibilidad">12.4.3. Versionado y compatibilidad</h4>
<div class="ulist">
<ul>
<li>
<p>Cambios no rompientes → versionado menor/patch; breaking changes → major o nueva ruta.</p>
</li>
<li>
<p>Publica paquetes <code>types</code>-only con su propio semver para alineación entre equipos.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_rápidas_2">12.5. Buenas prácticas rápidas</h3>
<div class="ulist">
<ul>
<li>
<p>Validar en el backend aun si el cliente está tipado.</p>
</li>
<li>
<p>Compartir DTOs públicos, no tipos de implementación.</p>
</li>
<li>
<p>Mantener transformaciones (DTO → Entity) explícitas.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_clase_tarea_4">12.6. Ejercicios prácticos (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Endpoint tipado + validación:</p>
</li>
<li>
<p>Implementa <code>POST /api/users</code> con <code>zod</code>, guarda en memoria y devuelve <code>User</code> tipado. Añade tests con <code>vitest</code> (validación y casos felices).</p>
</li>
<li>
<p>Ejercicio 2 — Cliente React tipado:</p>
</li>
<li>
<p>Crea <code>UserForm</code> que envíe <code>CreateUserDTO</code> y <code>UserList</code> que consuma <code>GET /api/users</code> usando <code>apiGet&lt;T&gt;</code>. Reutiliza tipos desde un módulo compartido.</p>
</li>
<li>
<p>Ejercicio 3 — Compartir tipos (práctico):</p>
</li>
<li>
<p>Extrae <code>User</code> y <code>CreateUserDTO</code> a <code>packages/shared</code> o <code>src/shared</code>; configura <code>paths</code> y verifica compilación en cliente y servidor.</p>
</li>
<li>
<p>Ejercicio 4 — Generación desde OpenAPI (avanzado):</p>
</li>
<li>
<p>Documenta el endpoint en OpenAPI y genera tipos con <code>openapi-typescript</code>; comprueba que el cliente compile sin <code>any</code>.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_módulo_12_proyecto_final_buenas_prácticas_y_migración_incremental_1_5h">13. Módulo 12 — Proyecto final, buenas prácticas y migración incremental (1.5h)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_contexto_y_propósito">13.1. Contexto y propósito</h3>
<div class="paragraph">
<p>Este módulo reúne todo lo aprendido: planificar una migración incremental desde JavaScript, aplicar buenas prácticas de arquitectura tipada y entregar un proyecto final que demuestre calidad, pruebas y contratos bien definidos. Se trabaja tanto la técnica (herramientas, flags de compilador, optimizaciones) como la disciplina de diseño (boundary-driven design, DTOs, transformaciones explícitas).</p>
</div>
</div>
<div class="sect2">
<h3 id="_migración_desde_javascript_estrategia_práctica">13.2. Migración desde JavaScript (estrategia práctica)</h3>
<div class="sect3">
<h4 id="_estrategia_por_fases_recomendado">13.2.1. Estrategia por fases (recomendado)</h4>
<div class="ulist">
<ul>
<li>
<p>Auditoría inicial: detectar módulos críticos, dependencias sin tipos y puntos de entrada del dominio.</p>
</li>
<li>
<p>Validación sin convertir: activar <code>allowJs + checkJs</code> y ejecutar <code>tsc --noEmit</code> para ver el estado actual.</p>
</li>
<li>
<p>Migración por capas: convertir primero la capa de dominio/core, luego servicios y por último UI/tests.</p>
</li>
<li>
<p>Añadir tests antes de convertir cada módulo: facilita detectar regresiones.</p>
</li>
<li>
<p>Habilitar <code>strict</code> progresivamente por paquetes (o directorios) y convertir errores en tareas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuración_práctica_para_migración_incremental">13.2.2. Configuración práctica para migración incremental</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"allowJs"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"checkJs"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noEmit"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"incremental"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tsBuildInfoFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">".tsbuildinfo"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"skipLibCheck"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">temporal</span><span class="w"> </span><span class="err">durante</span><span class="w"> </span><span class="err">migración</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/**/*"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lib/**/*"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Comandos útiles:
- <code>npx tsc --noEmit</code> — chequeo rápido sin generar artefactos.
- <code>npx ts-migrate migrate &lt;carpeta&gt;</code> — automatiza pasos básicos de conversión (útil en monorepos).
- <code>jscodeshift</code> / codemods — para cambios repetitivos (p. ej. transformar <code>module.exports</code> → <code>export</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_migrar_un_fichero_pequeño">13.2.3. Ejemplo: migrar un fichero pequeño</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// utils/format.js (antes)</span>
<span class="kd">function</span> <span class="nf">formatName</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">();</span> <span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">formatName</span> <span class="p">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="c1">// src/utils/format.ts (después)</span>
<span class="k">export</span> <span class="kd">type</span> <span class="nx">User</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nf">formatName</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="kr">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">();</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_herramientas_y_ayudas">13.2.4. Herramientas y ayudas</h4>
<div class="ulist">
<ul>
<li>
<p><code>ts-migrate</code>, <code>jscodeshift</code>, <code>eslint --fix</code> y <code>prettier</code> para automatizar pasos repetitivos.</p>
</li>
<li>
<p>Añadir JSDoc en código legacy para que TS infiera tipos antes de la conversión completa.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_estrategias_para_repos_grandes_y_monorepos">13.3. Estrategias para repos grandes y monorepos</h3>
<div class="ulist">
<ul>
<li>
<p>Usar <code>project references</code> y <code>composite</code> para compilar por paquetes y acelerar los builds (<code>tsc -b</code>).</p>
</li>
<li>
<p>Extraer tipos compartidos a <code>packages/shared</code> y versionarlos independientemente.</p>
</li>
<li>
<p>Migrar en ramas/PRs pequeñas y con CI que ejecute <code>tsc --noEmit</code> y tests.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="err">//</span><span class="w"> </span><span class="err">packages/app/tsconfig.json</span><span class="w"> </span><span class="err">(ejemplo</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">referencia)</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"composite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nl">"references"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"../shared"</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buenas_prácticas_y_arquitectura_tipada">13.4. Buenas prácticas y arquitectura tipada</h3>
<div class="sect3">
<h4 id="_boundaries_y_separación_de_capas">13.4.1. Boundaries y separación de capas</h4>
<div class="ulist">
<ul>
<li>
<p>Define boundaries claros: <code>domain</code> (modelos, lógica), <code>application</code> (casos de uso), <code>infrastructure</code> (DB, HTTP) y <code>presentation</code> (UI).</p>
</li>
<li>
<p>Mantén DTOs explícitos para la entrada/salida de las capas; evita exponer entidades internas a la API pública.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dto_entity_transformaciones_explícitas">13.4.2. DTO → Entity (transformaciones explícitas)</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ts"><span class="kd">type</span> <span class="nx">CreateUserDTO</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">email</span><span class="p">?:</span> <span class="kr">string</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">UserEntity</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">email</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">createdAt</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span>

<span class="kd">function</span> <span class="nf">toEntity</span><span class="p">(</span><span class="nx">dto</span><span class="p">:</span> <span class="nx">CreateUserDTO</span><span class="p">):</span> <span class="nx">UserEntity</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nc">String</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">()),</span> <span class="na">createdAt</span><span class="p">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">toISOString</span><span class="p">(),</span> <span class="p">...</span><span class="nx">dto</span> <span class="p">};</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_validación_runtime_vs_compile_time">13.4.3. Validación runtime vs compile-time</h4>
<div class="ulist">
<ul>
<li>
<p>Los tipos TypeScript son valiosos, pero la validación en runtime (p. ej. <code>zod</code>) es obligatoria en entradas externas.</p>
</li>
<li>
<p>Derivar tipos estáticos desde schemas (<code>z.infer&lt;&gt;</code>) reduce la duplicación y evita divergencias.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_y_optimización_de_compilación">13.5. Performance y optimización de compilación</h3>
<div class="ulist">
<ul>
<li>
<p>Habilita <code>incremental</code> y cachea <code>.tsbuildinfo</code> en CI para builds rápidos.</p>
</li>
<li>
<p><code>skipLibCheck</code> puede ayudar temporalmente, pero no debe ser la solución final.</p>
</li>
<li>
<p>Reduce la carga de <code>tsserver</code>: excluir carpetas grandes (<code>node_modules</code>, <code>dist</code>) y activar <code>files.exclude</code>/<code>exclude</code> en <code>tsconfig</code>.</p>
</li>
<li>
<p>Usa <code>project references</code> para paralelizar compilaciones en monorepos.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comandos y configuración rápida:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>tipo-check rápido
<span class="go">npx tsc --noEmit
</span><span class="gp">#</span><span class="w"> </span>build por paquetes <span class="o">(</span>monorepo<span class="o">)</span>
<span class="go">npx tsc -b packages/*</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_calidad_del_código_y_prácticas_de_entrega">13.6. Calidad del código y prácticas de entrega</h3>
<div class="ulist">
<ul>
<li>
<p>Mantén <code>strict: true</code> en paquetes nuevos; limita <code>any</code> y documenta excepciones.</p>
</li>
<li>
<p>Linting + Prettier + <code>lint-staged</code> para calidad en commits.</p>
</li>
<li>
<p>Pruebas unitarias y de integración con coverage mínimo acordado (ej.: 70%).</p>
</li>
<li>
<p>CI: <code>type-check</code>, <code>lint</code>, <code>test</code> y <code>build</code> como pasos obligatorios.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_proyecto_final_entregables_checklist">13.7. Proyecto final — entregables (checklist)</h3>
<div class="ulist">
<ul>
<li>
<p>Código fuente en un repo público/privado con commits claros.</p>
</li>
<li>
<p><code>README.md</code> con instrucciones para ejecutar, testear y desplegar.</p>
</li>
<li>
<p><code>package.json</code> con scripts: <code>build</code>, <code>type-check</code>, <code>test</code>, <code>lint</code>.</p>
</li>
<li>
<p>Tests automáticos (unit + integración) y <code>vitest</code>/<code>jest</code> configurado.</p>
</li>
<li>
<p>CI configurado (GitHub Actions) que ejecute <code>type-check</code> + <code>lint</code> + <code>test</code>.</p>
</li>
<li>
<p>Demo o captura de pantalla y explicación de decisiones arquitectónicas.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_criterios_de_entrega_y_rúbrica_sugerida">13.8. Criterios de entrega y rúbrica (sugerida)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Criterio</th>
<th class="tableblock halign-left valign-top">Descripción</th>
<th class="tableblock halign-left valign-top">Peso</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipado y corrección</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El proyecto compila sin <code>--noEmit</code>, no hay <code>any</code> no justificados y la API pública está tipada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests &amp; Calidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests pasan, cobertura mínima alcanzada y casos esenciales testeados</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arquitectura y diseño</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boundaries claros, DTOs/Entities separados, separación de responsabilidades</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CI / Lint / Build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pipeline que valida tipo/lint/tests y build reproducible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentación &amp; Demo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">README, instrucciones y demo funcional (o capturas)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10%</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_clase_tarea_5">13.9. Ejercicios prácticos (clase / tarea)</h3>
<div class="ulist">
<ul>
<li>
<p>Ejercicio 1 — Migración incremental: toma un módulo JS y conviértelo a TS usando <code>allowJs</code>/<code>checkJs</code>, añade tests y habilita <code>strict</code> para ese módulo.</p>
</li>
<li>
<p>Ejercicio 2 — DTOs y validación: crea <code>CreateOrderDTO</code>, valida con <code>zod</code>, transforma a <code>OrderEntity</code> y añade tests de integridad.</p>
</li>
<li>
<p>Ejercicio 3 — Optimización de build: configura <code>incremental</code> y <code>tsBuildInfoFile</code>, mide tiempo de compilación antes/después y documenta mejoras.</p>
</li>
<li>
<p>Ejercicio 4 — Proyecto final (mini-entrega): implementa una API pequeña (CRUD) + cliente React consumiéndola, comparte tipos y entrega CI + tests.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2026-02-23 08:26:33 +0100
</div>
</div>
</body>
</html>